(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ec40cd8"],{"0f0e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-wrapper"},[a("div",{staticClass:"list-box"},[t._l(t.labelList,(function(e,i){return t.isUser?a("div",{key:i,staticClass:"label-box"},[e.children?a("div",{staticClass:"title"},[t._v(t._s(e.label_name))]):t._e(),e.children&&e.children.length?a("div",{staticClass:"list"},t._l(e.children,(function(e,i){return a("div",{key:i,staticClass:"label-item",class:{on:e.disabled},on:{click:function(a){return t.selectLabel(e)}}},[t._v("\n          "+t._s(e.label_name)+"\n        ")])})),0):t._e()]):t._e()})),t.isUser?t._e():a("div",[t._v("暂无标签")])],2),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:t.subBtn}},[t._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:t.cancel}},[t._v("取消")])],1)])},r=[],o=(a("d81d"),a("4de4"),a("d3b7"),a("a434"),a("e9c4"),a("c4c8")),s={name:"userLabel",props:{},data:function(){return{labelList:[],dataLabel:[],isUser:!1}},mounted:function(){},methods:{inArray:function(t,e){for(var a in e)if(e[a].id==t)return!0;return!1},userLabel:function(t){var e=this;this.dataLabel=t,Object(o["y"])().then((function(t){t.data.map((function(t){t.children&&(e.isUser=!0,t.children.map((function(t){e.inArray(t.id,e.dataLabel)?t.disabled=!0:t.disabled=!1})))})),e.labelList=t.data})).catch((function(t){e.$Message.error(t.msg)}))},selectLabel:function(t){if(t.disabled){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1),t.disabled=!1}else this.dataLabel.push({label_name:t.label_name,id:t.id}),t.disabled=!0},subBtn:function(){this.$emit("activeData",JSON.parse(JSON.stringify(this.dataLabel)))},cancel:function(){this.$emit("close")}}},n=s,l=(a("b8f2"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,"2ef182e9",null);e["a"]=c.exports},"23e74":function(t,e,a){},"2c3e":function(t,e,a){var i=a("da84"),r=a("83ab"),o=a("9f7f").MISSED_STICKY,s=a("c6b6"),n=a("edd0"),l=a("69f3").get,c=RegExp.prototype,d=i.TypeError;r&&o&&n(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===s(this))return!!l(this).sticky;throw d("Incompatible receiver, RegExp required")}}})},"3d87":function(t,e,a){var i=a("4930");t.exports=i&&!!Symbol["for"]&&!!Symbol.keyFor},"428f":function(t,e,a){var i=a("da84");t.exports=i},"4c26":function(t,e,a){},"4d63":function(t,e,a){var i=a("83ab"),r=a("da84"),o=a("e330"),s=a("94ca"),n=a("7156"),l=a("9112"),c=a("241c").f,d=a("3a9b"),m=a("44e7"),u=a("577e"),p=a("90d8"),f=a("9f7f"),h=a("aeb0"),v=a("cb2d"),_=a("d039"),b=a("1a2d"),g=a("69f3").enforce,y=a("2626"),V=a("b622"),k=a("fce3"),x=a("107c"),w=V("match"),C=r.RegExp,F=C.prototype,I=r.SyntaxError,$=o(F.exec),B=o("".charAt),T=o("".replace),S=o("".indexOf),N=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,O=/a/g,D=new C(M)!==M,R=f.MISSED_STICKY,P=f.UNSUPPORTED_Y,A=i&&(!D||R||k||x||_((function(){return O[w]=!1,C(M)!=M||C(O)==O||"/a/i"!=C(M,"i")}))),j=function(t){for(var e,a=t.length,i=0,r="",o=!1;i<=a;i++)e=B(t,i),"\\"!==e?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+B(t,++i);return r},W=function(t){for(var e,a=t.length,i=0,r="",o=[],s={},n=!1,l=!1,c=0,d="";i<=a;i++){if(e=B(t,i),"\\"===e)e+=B(t,++i);else if("]"===e)n=!1;else if(!n)switch(!0){case"["===e:n=!0;break;case"("===e:$(L,N(t,i+1))&&(i+=2,l=!0),r+=e,c++;continue;case">"===e&&l:if(""===d||b(s,d))throw new I("Invalid capture group name");s[d]=!0,o[o.length]=[d,c],l=!1,d="";continue}l?d+=e:r+=e}return[r,o]};if(s("RegExp",A)){for(var E=function(t,e){var a,i,r,o,s,c,f=d(F,this),h=m(t),v=void 0===e,_=[],b=t;if(!f&&h&&v&&t.constructor===E)return t;if((h||d(F,t))&&(t=t.source,v&&(e=p(b))),t=void 0===t?"":u(t),e=void 0===e?"":u(e),b=t,k&&"dotAll"in M&&(i=!!e&&S(e,"s")>-1,i&&(e=T(e,/s/g,""))),a=e,R&&"sticky"in M&&(r=!!e&&S(e,"y")>-1,r&&P&&(e=T(e,/y/g,""))),x&&(o=W(t),t=o[0],_=o[1]),s=n(C(t,e),f?this:F,E),(i||r||_.length)&&(c=g(s),i&&(c.dotAll=!0,c.raw=E(j(t),a)),r&&(c.sticky=!0),_.length&&(c.groups=_)),t!==b)try{l(s,"source",""===b?"(?:)":b)}catch(y){}return s},z=c(C),G=0;z.length>G;)h(E,C,z[G++]);F.constructor=E,E.prototype=F,v(r,"RegExp",E,{constructor:!0})}y("RegExp")},"57b9":function(t,e,a){var i=a("c65b"),r=a("d066"),o=a("b622"),s=a("cb2d");t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,a=e&&e.valueOf,n=o("toPrimitive");e&&!e[n]&&s(e,n,(function(t){return i(a,this)}),{arity:1})}},"5a47":function(t,e,a){var i=a("23e7"),r=a("4930"),o=a("d039"),s=a("7418"),n=a("7b0b"),l=!r||o((function(){s.f(1)}));i({target:"Object",stat:!0,forced:l},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(n(t)):[]}})},"61f7":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return d}));var i=a("fc11"),r=a("f3f3");a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("498a"),a("d3b7"),a("b64b"),a("99af");function o(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(e)){var r=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?r:s(r))}return e}function s(t){return("00"+t).substr(t.length)}var n={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};var l=function(t,e){t.message=function(t){return e.replace("%s",t||"")}};function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])({required:!0,message:t,type:"string"},e)}function d(t){return m.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,t)}l(c,"请输入%s"),l(d,"%s格式不正确");var m=Object.keys(n).reduce((function(t,e){return t[e]=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="range"===e?{min:t[0],max:t[1]}:Object(i["a"])({},e,t);return Object(r["a"])(Object(r["a"])({message:a.replace(":".concat(e),"range"===e?"".concat(t[0],"-").concat(t[1]):t),type:"string"},s),o)},l(t[e],n[e]),t}),{})},"6fd3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{scrollable:"",title:"商品规格",width:"950"},on:{"on-cancel":t.onCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:t.formDynamic,rules:t.rules,"label-width":110,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{span:"24"}},[a("Col",{staticClass:"mb15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格模板名称：",prop:"rule_name"}},[a("Input",{attrs:{placeholder:"请输入标题名称",maxlength:20},model:{value:t.formDynamic.rule_name,callback:function(e){t.$set(t.formDynamic,"rule_name","string"===typeof e?e.trim():e)},expression:"formDynamic.rule_name"}})],1)],1)],1),t._l(t.formDynamic.spec,(function(e,i){return a("Col",{key:i,staticClass:"noForm",attrs:{span:"23"}},[a("FormItem",[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[t._v(t._s(e.value))]),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.handleRemove(i)}}})],1),a("div",{staticClass:"rulesBox"},[t._l(e.detail,(function(i,r){return a("Tag",{key:r,attrs:{type:"dot",closable:"",color:"primary",name:i},on:{"on-close":function(a){return t.handleRemove2(e.detail,r)}}},[t._v(t._s(i))])})),a("Input",{staticStyle:{width:"200px"},attrs:{search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(a){return t.createAttr(e.detail.attrsVal,i)}},model:{value:e.detail.attrsVal,callback:function(a){t.$set(e.detail,"attrsVal","string"===typeof a?a.trim():a)},expression:"item.detail.attrsVal"}})],2)])],1)})),t.isBtn?a("Col",{staticClass:"mt10",attrs:{span:"24"}},[a("Col",{staticClass:"mr15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格名称："}},[a("Input",{attrs:{placeholder:"请输入规格"},model:{value:t.attrsName,callback:function(e){t.attrsName=e},expression:"attrsName"}})],1)],1),a("Col",{staticClass:"mr20",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{placeholder:"请输入规格值"},model:{value:t.attrsVal,callback:function(e){t.attrsVal=e},expression:"attrsVal"}})],1)],1),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary"},on:{click:t.createAttrName}},[t._v("确定")])],1),a("Col",{attrs:{span:"2"}},[a("Button",{on:{click:t.offAttrName}},[t._v("取消")])],1)],1):t._e(),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],2),t.isBtn?t._e():a("Button",{staticClass:"ml95 mt10",attrs:{type:"primary",icon:"md-add"},on:{click:t.addBtn}},[t._v("添加新规格")])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formDynamic")}}},[t._v("确定")])],1)],1)},r=[],o=(a("a434"),a("d3b7"),a("c4c8")),s={name:"addAttr",data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:"请输入规格名称",trigger:"blur"}]},formDynamic:{rule_name:"",spec:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},computed:{},methods:{onCancel:function(){this.ids=0,this.clear()},addBtn:function(){this.isBtn=!0},getIofo:function(t){var e=this;this.spinShow=!0,this.ids=t.id,Object(o["B"])(t.id).then((function(t){e.formDynamic=t.data.info,e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&(0===e.formDynamic.spec.length?e.$Message.warning("请至少添加一条商品规格！"):(e.modal_loading=!0,void setTimeout((function(){Object(o["A"])(e.formDynamic,e.ids).then((function(t){e.$Message.success(t.msg),setTimeout((function(){e.modal=!1,e.modal_loading=!1}),500),setTimeout((function(){e.$emit("getList"),e.clear()}),600)})).catch((function(t){e.modal_loading=!1,e.$Message.error(t.msg)}))}),1200)))}))},clear:function(){this.$refs["formDynamic"].resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.attrsName="",this.attrsVal="",this.ids=0},offAttrName:function(){this.isBtn=!1},handleRemove:function(t){this.formDynamic.spec.splice(t,1)},handleRemove2:function(t,e){t.splice(e,1)},createAttrName:function(){if(this.attrsName&&this.attrsVal){var t={value:this.attrsName,detail:[this.attrsVal]};this.formDynamic.spec.push(t);var e={};this.formDynamic.spec=this.formDynamic.spec.reduce((function(t,a){return!e[a.value]&&(e[a.value]=t.push(a)),t}),[]),this.attrsName="",this.attrsVal="",this.isBtn=!1}else this.$Message.warning("请添加规格名称或规格值")},createAttr:function(t,e){if(t){this.formDynamic.spec[e].detail.push(t);var a={};this.formDynamic.spec[e].detail=this.formDynamic.spec[e].detail.reduce((function(t,e){return!a[e]&&(a[e]=t.push(e)),t}),[])}else this.$Message.warning("请添加属性")}}},n=s,l=(a("d8cb"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,"75a46b5e",null);e["a"]=c.exports},"746f":function(t,e,a){var i=a("428f"),r=a("1a2d"),o=a("e538"),s=a("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},"7a23":function(t,e,a){},"807c":function(t,e,a){},"9df6":function(t,e,a){"use strict";var i=a("23e74"),r=a.n(i);r.a},a24f:function(t,e,a){"use strict";var i=a("4c26"),r=a.n(i);r.a},a4d3:function(t,e,a){a("d9f5"),a("b4f8"),a("c513"),a("e9c4"),a("5a47")},b4f8:function(t,e,a){var i=a("23e7"),r=a("d066"),o=a("1a2d"),s=a("577e"),n=a("5692"),l=a("3d87"),c=n("string-to-symbol-registry"),d=n("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{for:function(t){var e=s(t);if(o(c,e))return c[e];var a=r("Symbol")(e);return c[e]=a,d[a]=e,a}})},b8f2:function(t,e,a){"use strict";var i=a("7a23"),r=a.n(i);r.a},c513:function(t,e,a){var i=a("23e7"),r=a("1a2d"),o=a("d9b5"),s=a("0d51"),n=a("5692"),l=a("3d87"),c=n("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!l},{keyFor:function(t){if(!o(t))throw TypeError(s(t)+" is not a symbol");if(r(c,t))return c[t]}})},c607:function(t,e,a){var i=a("da84"),r=a("83ab"),o=a("fce3"),s=a("c6b6"),n=a("edd0"),l=a("69f3").get,c=RegExp.prototype,d=i.TypeError;r&&o&&n(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===s(this))return!!l(this).dotAll;throw d("Incompatible receiver, RegExp required")}}})},c7e8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"shopp-manager"}},[a("div",{staticClass:"i-layout-page-header header_top"},[a("div",{staticClass:"i-layout-page-header fl_header"},[a("router-link",{attrs:{to:{path:"/admin/product/product_list"}}},[a("Button",{attrs:{icon:"ios-arrow-back",size:"small",type:"text"}},[t._v("返回")])],1),a("Divider",{attrs:{type:"vertical"}}),a("span",{staticClass:"ivu-page-header-title mr20",staticStyle:{padding:"0"},domProps:{textContent:t._s(t.$route.params.id?"编辑商品":"添加商品")}})],1)]),a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Tabs",{on:{"on-click":t.onhangeTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.headTab,(function(t,e){return a("TabPane",{key:e,attrs:{label:t.tit,name:t.name}})})),1),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{directives:[{name:"show",rawName:"v-show",value:"1"===t.currentTab,expression:"currentTab === '1'"}],attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品类型：",props:"is_virtual"}},t._l(t.virtual,(function(e,i){return a("div",{key:i,staticClass:"virtual",class:t.formValidate.virtual_type==e.id?"virtual_boder":"virtual_boder2",on:{click:function(a){return t.virtualbtn(e.id,2)}}},[a("div",{staticClass:"virtual_top"},[t._v(t._s(e.tit))]),a("div",{staticClass:"virtual_bottom"},[t._v("("+t._s(e.tit2)+")")]),t.formValidate.virtual_type==e.id?a("div",{staticClass:"virtual_san"}):t._e(),t.formValidate.virtual_type==e.id?a("div",{staticClass:"virtual_dui"},[t._v("✓")]):t._e()])})),0)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品分类：",prop:"cate_id"}},[a("Select",{staticClass:"perW20",attrs:{placeholder:"请选择商品分类",multiple:""},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}},t._l(t.treeSelect,(function(e){return a("Option",{key:e.id,attrs:{disabled:0===e.pid,value:e.id}},[t._v(t._s(e.html+e.cate_name))])})),1),a("span",{staticClass:"addfont",on:{click:t.addCate}},[t._v("新增分类")])],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品名称：",prop:"store_name"}},[a("Input",{staticClass:"perW20",attrs:{placeholder:"请输入商品名称"},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name","string"===typeof e?e.trim():e)},expression:"formValidate.store_name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"单位：",prop:"unit_name"}},[a("Input",{staticClass:"perW20",attrs:{placeholder:"请输入单位"},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品轮播图：",prop:"slider_image"}},[a("div",{staticClass:"acea-row"},[t._l(t.formValidate.slider_image,(function(e,i){return a("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(a){return t.handleDragStart(a,e)},dragover:function(a){return a.preventDefault(),t.handleDragOver(a,e)},dragenter:function(a){return t.handleDragEnter(a,e)},dragend:function(a){return t.handleDragEnd(a,e)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove(i)}}})],1)})),t.formValidate.slider_image.length<10?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):t._e(),a("Input",{staticStyle:{display:"none"},model:{value:t.formValidate.slider_image[0],callback:function(e){t.$set(t.formValidate.slider_image,0,e)},expression:"formValidate.slider_image[0]"}})],2),a("div",{staticClass:"titTip"},[t._v("建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传10张")])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"添加视频："}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.video_open,callback:function(e){t.$set(t.formValidate,"video_open",e)},expression:"formValidate.video_open"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),t.formValidate.video_open?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"视频类型："}},[a("RadioGroup",{on:{"on-change":t.changeVideo},model:{value:t.seletVideo,callback:function(e){t.seletVideo=e},expression:"seletVideo"}},[a("Radio",{staticClass:"radio",attrs:{label:0}},[t._v("本地视频")]),a("Radio",{attrs:{label:1}},[t._v("视频链接")])],1)],1)],1):t._e(),t.formValidate.video_open?a("Col",{attrs:{span:"24",id:"selectvideo"}},[a("FormItem",{attrs:{label:"",prop:"video_link"}},[1!=t.seletVideo||t.formValidate.video_link?t._e():a("Input",{staticClass:"perW20",attrs:{placeholder:"请输入视频链接"},model:{value:t.videoLink,callback:function(e){t.videoLink=e},expression:"videoLink"}}),a("input",{ref:"refid",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.zh_uploadFile_change}}),0!=t.seletVideo||"1"===t.upload_type&&!t.videoLink||t.formValidate.video_link?t._e():a("div",{staticClass:"ml10 videbox",on:{click:t.zh_uploadFile}},[t._v("\n              +\n            ")]),1!=t.seletVideo||"1"===t.upload_type&&!t.videoLink||t.formValidate.video_link?t._e():a("Button",{staticClass:"ml10",attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:t.zh_uploadFile}},[t._v("确认添加")]),"1"!==t.upload_type||t.videoLink?t._e():a("Upload",{staticStyle:{display:"inline-block"},attrs:{"show-upload-list":!1,action:t.fileUrl2,"before-upload":t.videoSaveToUrl,data:t.uploadData,headers:t.header,multiple:!0}},[0!==t.seletVideo||t.formValidate.video_link?t._e():a("div",{staticClass:"videbox"},[t._v("+")])]),t.formValidate.video_link?a("div",{staticClass:"iview-video-style"},[a("video",{staticStyle:{width:"100%",height:"100% !important","border-radius":"10px"},attrs:{src:t.formValidate.video_link,controls:"controls"}},[t._v("\n                您的浏览器不支持 video 标签。\n              ")]),a("div",{staticClass:"mark"}),a("Icon",{staticClass:"iconv",attrs:{type:"ios-trash-outline"},on:{click:t.delVideo}})],1):t._e(),t.upload.videoIng||t.videoIng?a("Progress",{staticClass:"progress",attrs:{percent:t.progress,"stroke-width":5}}):t._e(),a("div",{staticClass:"titTip"},[t._v("建议时长：9～30秒，视频宽高比16:9")])],1)],1):t._e(),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"商品状态："}},[a("RadioGroup",{model:{value:t.formValidate.is_show,callback:function(e){t.$set(t.formValidate,"is_show",e)},expression:"formValidate.is_show"}},[a("Radio",{staticClass:"radio",attrs:{label:1}},[t._v("上架")]),a("Radio",{attrs:{label:0}},[t._v("下架")])],1)],1)],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:"2"===t.currentTab,expression:"currentTab === '2'"}],attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品规格：",props:"spec_type"}},[a("RadioGroup",{on:{"on-change":t.changeSpec},model:{value:t.formValidate.spec_type,callback:function(e){t.$set(t.formValidate,"spec_type",e)},expression:"formValidate.spec_type"}},[a("Radio",{staticClass:"radio",attrs:{label:0}},[t._v("单规格")]),a("Radio",{attrs:{label:1}},[t._v("多规格")])],1)],1)],1),1===t.formValidate.spec_type?a("Col",{staticClass:"noForm",attrs:{span:"24"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"选择规格：",prop:""}},[a("div",{staticClass:"acea-row row-middle"},[a("Select",{staticClass:"perW20",model:{value:t.formValidate.selectRule,callback:function(e){t.$set(t.formValidate,"selectRule",e)},expression:"formValidate.selectRule"}},t._l(t.ruleList,(function(e,i){return a("Option",{key:i,attrs:{value:e.rule_name}},[t._v(t._s(e.rule_name))])})),1),a("Button",{staticClass:"mr20",attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),a("Button",{on:{click:t.addRule}},[t._v("添加规格模板")])],1)])],1),a("Col",{attrs:{span:"24"}},[0!==t.attrs.length?a("FormItem",[a("draggable",{staticClass:"dragArea list-group",attrs:{list:t.attrs,group:"peoples",handle:".move-icon",move:t.checkMove},on:{end:t.end}},t._l(t.attrs,(function(e,i){return a("div",{key:i,staticClass:"acea-row row-middle mb10"},[a("div",{staticClass:"move-icon"},[a("span",{staticClass:"iconfont icondrag2"})]),a("div",{class:t.moveIndex===i?"borderStyle":"",staticStyle:{width:"90%"}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[t._v(t._s(e.value))]),a("Icon",{staticClass:"curs",attrs:{type:"ios-close-circle",size:"14"},on:{click:function(e){return t.handleRemoveRole(i)}}})],1),a("div",{staticClass:"rulesBox"},[a("draggable",{attrs:{list:e.detail,handle:".drag"}},t._l(e.detail,(function(i,r){return a("Tag",{key:r,staticClass:"mr20 drag",attrs:{type:"dot",closable:"",color:"primary",name:i},on:{"on-close":function(a){return t.handleRemove2(e.detail,r)}}},[t._v(t._s(i))])})),1),a("Input",{staticStyle:{width:"150px"},attrs:{search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(a){return t.createAttr(e.detail.attrsVal,i)}},model:{value:e.detail.attrsVal,callback:function(a){t.$set(e.detail,"attrsVal",a)},expression:"item.detail.attrsVal"}})],1)])])})),0)],1):t._e()],1),t.createBnt?a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"md-add"},on:{click:t.addBtn}},[t._v("添加新规格")]),a("Button",{attrs:{type:"success"},on:{click:function(e){return t.generate(1)}}},[t._v("立即生成")])],1)],1):t._e(),t.showIput?a("Col",{attrs:{span:"24"}},[a("Col",{attrs:{xl:6,lg:9,md:10,sm:24,xs:24}},[a("FormItem",{attrs:{label:"规格："}},[a("Input",{attrs:{placeholder:"请输入规格"},model:{value:t.formDynamic.attrsName,callback:function(e){t.$set(t.formDynamic,"attrsName",e)},expression:"formDynamic.attrsName"}})],1)],1),a("Col",{attrs:{xl:6,lg:9,md:10,sm:24,xs:24}},[a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{placeholder:"请输入规格值"},model:{value:t.formDynamic.attrsVal,callback:function(e){t.$set(t.formDynamic,"attrsVal",e)},expression:"formDynamic.attrsVal"}})],1)],1),a("Col",{attrs:{xl:6,lg:5,md:10,sm:24,xs:24}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary"},on:{click:t.createAttrName}},[t._v("确定")]),a("Button",{on:{click:t.offAttrName}},[t._v("取消")])],1)],1)],1):t._e(),t.manyFormValidate.length&&0!==t.formValidate.header.length&&0!==t.attrs.length?a("Col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[t.formValidate.is_virtual?t._e():a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"labeltop",attrs:{label:"批量设置："}},[a("Table",{attrs:{data:t.oneFormBatch,columns:t.formValidate.is_virtual?t.columns3:t.columns2,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var i=e.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","duopi",i)}}},[t.oneFormBatch[0].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.oneFormBatch[0].price,callback:function(e){t.$set(t.oneFormBatch[0],"price",e)},expression:"oneFormBatch[0].price"}})]}},{key:"cost",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.oneFormBatch[0].cost,callback:function(e){t.$set(t.oneFormBatch[0],"cost",e)},expression:"oneFormBatch[0].cost"}})]}},{key:"ot_price",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:t.oneFormBatch[0].ot_price,callback:function(e){t.$set(t.oneFormBatch[0],"ot_price",e)},expression:"oneFormBatch[0].ot_price"}})]}},{key:"stock",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{disabled:1==t.formValidate.is_virtual&&1==t.formValidate.virtual_type,min:0,max:99999999},model:{value:t.oneFormBatch[0].stock,callback:function(e){t.$set(t.oneFormBatch[0],"stock",e)},expression:"oneFormBatch[0].stock"}})]}},{key:"fictitious",fn:function(e){var i=e.row,r=e.index;return[i.coupon_id||2!=t.formValidate.virtual_type?i.coupon_id&&2==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v(t._s(i.coupon_name))]):i.virtual_list.length||1!=t.formValidate.virtual_type?i.virtual_list.length&&1==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"oneFormBatch",r)}}},[t._v("已设置")]):t._e():a("Button",{on:{click:function(e){return t.addVirtual(r,"oneFormBatch")}}},[t._v("添加卡密")]):a("Button",{on:{click:function(e){return t.addGoodsCoupon(r,"oneFormBatch")}}},[t._v("添加优惠券")])]}},{key:"bar_code",fn:function(e){e.row,e.index;return[a("Input",{model:{value:t.oneFormBatch[0].bar_code,callback:function(e){t.$set(t.oneFormBatch[0],"bar_code",e)},expression:"oneFormBatch[0].bar_code"}})]}},{key:"weight",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{step:.1,min:0,max:99999999},model:{value:t.oneFormBatch[0].weight,callback:function(e){t.$set(t.oneFormBatch[0],"weight",e)},expression:"oneFormBatch[0].weight"}})]}},{key:"volume",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{step:.1,min:0,max:99999999},model:{value:t.oneFormBatch[0].volume,callback:function(e){t.$set(t.oneFormBatch[0],"volume",e)},expression:"oneFormBatch[0].volume"}})]}},{key:"action",fn:function(e){e.row,e.index;return[a("a",{on:{click:t.batchAdd}},[t._v("批量添加")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:t.batchDel}},[t._v("清空")])]}}],null,!1,565452426)})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"labeltop",attrs:{label:"商品属性："}},[a("Table",{attrs:{data:t.manyFormValidate,columns:t.formValidate.header,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var i=e.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","duoTable",i)}}},[t.manyFormValidate[i].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.manyFormValidate[i].pic,expression:"manyFormValidate[index].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].price,callback:function(e){t.$set(t.manyFormValidate[i],"price",e)},expression:"manyFormValidate[index].price"}})]}},{key:"cost",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].cost,callback:function(e){t.$set(t.manyFormValidate[i],"cost",e)},expression:"manyFormValidate[index].cost"}})]}},{key:"ot_price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].ot_price,callback:function(e){t.$set(t.manyFormValidate[i],"ot_price",e)},expression:"manyFormValidate[index].ot_price"}})]}},{key:"stock",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{disabled:1==t.formValidate.is_virtual&&1==t.formValidate.virtual_type,min:0,max:99999999,precision:0},model:{value:t.manyFormValidate[i].stock,callback:function(e){t.$set(t.manyFormValidate[i],"stock",e)},expression:"manyFormValidate[index].stock"}})]}},{key:"bar_code",fn:function(e){e.row;var i=e.index;return[a("Input",{model:{value:t.manyFormValidate[i].bar_code,callback:function(e){t.$set(t.manyFormValidate[i],"bar_code",e)},expression:"manyFormValidate[index].bar_code"}})]}},{key:"weight",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].weight,callback:function(e){t.$set(t.manyFormValidate[i],"weight",e)},expression:"manyFormValidate[index].weight"}})]}},{key:"volume",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].volume,callback:function(e){t.$set(t.manyFormValidate[i],"volume",e)},expression:"manyFormValidate[index].volume"}})]}},{key:"fictitious",fn:function(e){var i=e.row,r=e.index;return[i.coupon_id||2!=t.formValidate.virtual_type?i.coupon_id&&2==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v(t._s(i.coupon_name))]):i.virtual_list||i.stock||1!=t.formValidate.virtual_type?(i.virtual_list.length||i.stock)&&1==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v("已设置")]):t._e():a("Button",{on:{click:function(e){return t.addVirtual(r,"manyFormValidate")}}},[t._v("添加卡密")]):a("Button",{on:{click:function(e){return t.addGoodsCoupon(r,"manyFormValidate")}}},[t._v("添加优惠券")])]}},{key:"action",fn:function(e){e.row;var i=e.index;return[a("a",{on:{click:function(e){return t.delAttrTable(i)}}},[t._v("删除")])]}}],null,!1,3441832269)})],1)],1)],1):t._e()],1):t._e(),0===t.formValidate.spec_type?a("div",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"图片："}},[a("div",{staticClass:"pictrueBox",on:{click:function(e){return t.modalPicTap("dan","danTable",0)}}},[t.oneFormValidate[0].pic?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]}),a("Input",{staticStyle:{display:"none"},model:{value:t.oneFormValidate[0].pic,callback:function(e){t.$set(t.oneFormValidate[0],"pic",e)},expression:"oneFormValidate[0].pic"}})],1):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Input",{staticStyle:{display:"none"},model:{value:t.oneFormValidate[0].pic,callback:function(e){t.$set(t.oneFormValidate[0],"pic",e)},expression:"oneFormValidate[0].pic"}}),a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"售价："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,precision:2,max:99999999,"active-change":!1},model:{value:t.oneFormValidate[0].price,callback:function(e){t.$set(t.oneFormValidate[0],"price",e)},expression:"oneFormValidate[0].price"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"成本价："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,max:99999999,precision:2,"active-change":!1},model:{value:t.oneFormValidate[0].cost,callback:function(e){t.$set(t.oneFormValidate[0],"cost",e)},expression:"oneFormValidate[0].cost"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"原价："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,max:99999999,precision:2,"active-change":!1},model:{value:t.oneFormValidate[0].ot_price,callback:function(e){t.$set(t.oneFormValidate[0],"ot_price",e)},expression:"oneFormValidate[0].ot_price"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"库存："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,max:99999999,disabled:1==t.formValidate.virtual_type,precision:0},model:{value:t.oneFormValidate[0].stock,callback:function(e){t.$set(t.oneFormValidate[0],"stock",e)},expression:"oneFormValidate[0].stock"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品编号："}},[a("Input",{staticClass:"perW20",model:{value:t.oneFormValidate[0].bar_code,callback:function(e){t.$set(t.oneFormValidate[0],"bar_code","string"===typeof e?e.trim():e)},expression:"oneFormValidate[0].bar_code"}})],1)],1),0==t.formValidate.virtual_type?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"重量（KG）："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,max:99999999},model:{value:t.oneFormValidate[0].weight,callback:function(e){t.$set(t.oneFormValidate[0],"weight",e)},expression:"oneFormValidate[0].weight"}})],1)],1):t._e(),a("Col",{attrs:{span:"24"}},[0==t.formValidate.virtual_type?a("FormItem",{attrs:{label:"体积(m³)："}},[a("InputNumber",{staticClass:"perW20",attrs:{min:0,max:99999999},model:{value:t.oneFormValidate[0].volume,callback:function(e){t.$set(t.oneFormValidate[0],"volume",e)},expression:"oneFormValidate[0].volume"}})],1):t._e()],1),a("Col",{attrs:{span:"24"}},[1==t.formValidate.virtual_type||2==t.formValidate.virtual_type?a("FormItem",{attrs:{label:"虚拟商品："}},[t.oneFormValidate[0].coupon_id||2!=t.formValidate.virtual_type?t.oneFormValidate[0].coupon_id&&2==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(t.oneFormValidate[0],"oneFormValidate",0)}}},[t._v(t._s(t.oneFormValidate[0].coupon_name))]):t._e():a("Button",{on:{click:function(e){return t.addGoodsCoupon(0,"oneFormValidate")}}},[t._v("添加优惠券")]),t.oneFormValidate[0].virtual_list.length||t.oneFormValidate[0].stock||1!=t.formValidate.virtual_type?(t.oneFormValidate[0].virtual_list.length||t.oneFormValidate[0].stock>0)&&1==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(t.oneFormValidate[0],"oneFormValidate",0)}}},[t._v("已设置")]):t._e():a("Button",{on:{click:function(e){return t.addVirtual(0,"oneFormValidate")}}},[t._v("添加卡密")])],1):t._e()],1)],1):t._e()],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:"3"===t.currentTab,expression:"currentTab === '3'"}]},[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"商品详情："}},[a("WangEditor",{staticStyle:{width:"100%"},attrs:{content:t.contents},on:{editorContent:t.getEditorContent}})],1)],1),a("Col",{staticStyle:{width:"33%"},attrs:{span:"6"}},[a("div",{staticClass:"ifam"},[a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}})])])],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:6===t.headTab.length&&"4"===t.currentTab,expression:"headTab.length === 6 ? currentTab === '4' : false"}]},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"物流方式：",prop:"logistics"}},[a("CheckboxGroup",{on:{"on-change":t.logisticsBtn},model:{value:t.formValidate.logistics,callback:function(e){t.$set(t.formValidate,"logistics",e)},expression:"formValidate.logistics"}},[a("Checkbox",{attrs:{label:"1"}},[t._v("快递")]),a("Checkbox",{attrs:{label:"2"}},[t._v("到店核销")])],1)],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"运费设置："}},[a("RadioGroup",{model:{value:t.formValidate.freight,callback:function(e){t.$set(t.formValidate,"freight",e)},expression:"formValidate.freight"}},[a("Radio",{attrs:{label:2}},[t._v("固定邮费")]),a("Radio",{attrs:{label:3}},[t._v("运费模板")])],1)],1)],1),3!=t.formValidate.freight&&1!=t.formValidate.freight?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"",prop:1!=t.formValidate.freight?"freight":""}},[a("div",{staticClass:"acea-row"},[a("InputNumber",{staticClass:"perW20 maxW",attrs:{min:0,placeholder:"请输入金额"},model:{value:t.formValidate.postage,callback:function(e){t.$set(t.formValidate,"postage",e)},expression:"formValidate.postage"}})],1)])],1):t._e(),3==t.formValidate.freight?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"",prop:"temp_id"}},[a("div",{staticClass:"acea-row"},[a("Select",{staticClass:"perW20 maxW",attrs:{clearable:"",placeholder:"请选择运费模板"},model:{value:t.formValidate.temp_id,callback:function(e){t.$set(t.formValidate,"temp_id",e)},expression:"formValidate.temp_id"}},t._l(t.templateList,(function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),a("span",{staticClass:"addfont",on:{click:t.addTemp}},[t._v("新增运费模板")])],1)])],1):t._e()],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:6===t.headTab.length?"5"===t.currentTab:"4"===t.currentTab,expression:"headTab.length === 6 ? currentTab === '5' : currentTab === '4'"}],attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"虚拟销量："}},[a("InputNumber",{attrs:{min:0,max:999999,placeholder:"请输入虚拟销量"},model:{value:t.formValidate.ficti,callback:function(e){t.$set(t.formValidate,"ficti",e)},expression:"formValidate.ficti"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"排序："}},[a("InputNumber",{attrs:{min:0,max:999999,placeholder:"请输入排序"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"line"})]),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"赠送积分：",prop:"give_integral"}},[a("InputNumber",{attrs:{min:0,max:999999,placeholder:"请输入积分"},model:{value:t.formValidate.give_integral,callback:function(e){t.$set(t.formValidate,"give_integral",e)},expression:"formValidate.give_integral"}})],1)],1),a("Col",t._b({},"Col",t.grid3,!1),[a("FormItem",{attrs:{label:"赠送优惠券："}},[t.couponName.length?a("div",{staticClass:"mb20"},t._l(t.couponName,(function(e,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(a){return t.handleClose(e)}}},[t._v(t._s(e.title))])})),1):t._e(),a("Button",{attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("添加优惠券")])],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"关联用户标签：",prop:"label_id"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openLabel}},[a("div",{staticStyle:{width:"90%"}},[t.dataLabel.length?a("div",t._l(t.dataLabel,(function(e,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(a){return t.closeLabel(e)}}},[t._v(t._s(e.label_name))])})),1):a("span",{staticClass:"span"},[t._v("选择用户关联标签")])]),a("div",{staticClass:"iconfont iconxiayi"})]),a("span",{staticClass:"addfont",on:{click:t.addLabel}},[t._v("新增标签")])])])],1),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"line"})]),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"付费会员专属："}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.vip_product,callback:function(e){t.$set(t.formValidate,"vip_product",e)},expression:"formValidate.vip_product"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),a("div",{staticClass:"titTip"},[t._v("开启后仅付费会员可以看见并购买此商品")])],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"单独设置："}},[a("CheckboxGroup",{on:{"on-change":t.checkAllGroupChange},model:{value:t.formValidate.is_sub,callback:function(e){t.$set(t.formValidate,"is_sub",e)},expression:"formValidate.is_sub"}},[a("Checkbox",{attrs:{label:1}},[t._v("佣金设置（数字即返佣金额）")]),a("Checkbox",{attrs:{label:0}},[t._v("付费会员价")])],1)],1)],1),t.formValidate.is_sub.length?a("Col",{attrs:{span:"24"}},[0===t.formValidate.spec_type?a("FormItem",{attrs:{label:"商品属性："}},[a("Table",{attrs:{data:t.oneFormValidate,columns:t.columnsInstall,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row,e.index;return[a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormValidate[0].pic,expression:"oneFormValidate[0].pic"}]})])]}},{key:"price",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].price))]}},{key:"cost",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].cost))]}},{key:"ot_price",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].ot_price))]}},{key:"stock",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].stock))]}},{key:"bar_code",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].bar_code))]}},{key:"weight",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].weight))]}},{key:"fictitious",fn:function(e){var i=e.row,r=e.index;return[i.coupon_id||2!=t.formValidate.virtual_type?i.coupon_id&&2==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v(t._s(i.coupon_name))]):i.virtual_list.length||i.stock||1!=t.formValidate.virtual_type?(i.virtual_list.length||i.stock)&&1==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"oneFormValidate",r)}}},[t._v("已设置")]):t._e():a("Button",{on:{click:function(e){return t.addVirtual(r,"oneFormValidate")}}},[t._v("添加卡密")]):a("Button",{on:{click:function(e){return t.addGoodsCoupon(r,"oneFormValidate")}}},[t._v("添加优惠券")])]}},{key:"volume",fn:function(e){e.row,e.index;return[t._v(t._s(t.oneFormValidate[0].volume))]}},{key:"brokerage",fn:function(e){e.row,e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:999999},model:{value:t.oneFormValidate[0].brokerage,callback:function(e){t.$set(t.oneFormValidate[0],"brokerage",e)},expression:"oneFormValidate[0].brokerage"}})]}},{key:"brokerage_two",fn:function(e){e.row;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:999999},model:{value:t.oneFormValidate[0].brokerage_two,callback:function(e){t.$set(t.oneFormValidate[0],"brokerage_two",e)},expression:"oneFormValidate[0].brokerage_two"}})]}},{key:"vip_price",fn:function(e){e.row;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:999999},model:{value:t.oneFormValidate[0].vip_price,callback:function(e){t.$set(t.oneFormValidate[0],"vip_price",e)},expression:"oneFormValidate[0].vip_price"}})]}}],null,!1,3867653714)})],1):t._e(),1===t.formValidate.spec_type?a("FormItem",{attrs:{label:"批量设置："}},[t.formValidate.is_sub.indexOf(1)>-1?a("span",[t._v("\n              一级返佣："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入一级返佣",min:0,max:9999999},model:{value:t.manyBrokerage,callback:function(e){t.manyBrokerage=e},expression:"manyBrokerage"}}),t._v("\n              二级返佣："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入二级返佣",min:0,max:99999999},model:{value:t.manyBrokerageTwo,callback:function(e){t.manyBrokerageTwo=e},expression:"manyBrokerageTwo"}})],1):t._e(),t.formValidate.is_sub.indexOf(0)>-1?a("span",[t._v("\n              会员价："),a("InputNumber",{staticClass:"columnsBox perW20",attrs:{placeholder:"请输入会员价",min:0,max:99999999},model:{value:t.manyVipPrice,callback:function(e){t.manyVipPrice=e},expression:"manyVipPrice"}})],1):t._e(),a("Button",{attrs:{type:"primary"},on:{click:t.brokerageSetUp}},[t._v("批量设置")])],1):t._e(),1===t.formValidate.spec_type&&t.manyFormValidate.length?a("FormItem",{attrs:{label:"商品属性："}},[t.formValidate.is_sub?a("Table",{attrs:{data:t.manyFormValidate,columns:t.columnsInstal2,border:""},scopedSlots:t._u([{key:"pic",fn:function(e){e.row;var i=e.index;return[a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.manyFormValidate[i].pic,expression:"manyFormValidate[index].pic"}]})])]}},{key:"price",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].price))]}},{key:"cost",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].cost))]}},{key:"ot_price",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].ot_price))]}},{key:"stock",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].stock))]}},{key:"bar_code",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].bar_code))]}},{key:"weight",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].weight))]}},{key:"fictitious",fn:function(e){var i=e.row,r=e.index;return[i.coupon_id||2!=t.formValidate.virtual_type?i.coupon_id&&2==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v(t._s(i.coupon_name))]):i.virtual_list.length||i.stock||1!=t.formValidate.virtual_type?(i.virtual_list.length||i.stock)&&1==t.formValidate.virtual_type?a("span",{staticClass:"see",on:{click:function(e){return t.see(i,"manyFormValidate",r)}}},[t._v("已设置")]):t._e():a("Button",{on:{click:function(e){return t.addVirtual(r,"manyFormValidate")}}},[t._v("添加卡密")]):a("Button",{on:{click:function(e){return t.addGoodsCoupon(r,"manyFormValidate")}}},[t._v("添加优惠券")])]}},{key:"volume",fn:function(e){e.row;var a=e.index;return[t._v(t._s(t.manyFormValidate[a].volume))]}},{key:"brokerage",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].brokerage,callback:function(e){t.$set(t.manyFormValidate[i],"brokerage",e)},expression:"manyFormValidate[index].brokerage"}})]}},{key:"brokerage_two",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].brokerage_two,callback:function(e){t.$set(t.manyFormValidate[i],"brokerage_two",e)},expression:"manyFormValidate[index].brokerage_two"}})]}},{key:"vip_price",fn:function(e){e.row;var i=e.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0,max:99999999},model:{value:t.manyFormValidate[i].vip_price,callback:function(e){t.$set(t.manyFormValidate[i],"vip_price",e)},expression:"manyFormValidate[index].vip_price"}})]}}],null,!1,80915245)}):t._e()],1):t._e()],1):t._e(),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"line"})]),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"是否限购："}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.is_limit,callback:function(e){t.$set(t.formValidate,"is_limit",e)},expression:"formValidate.is_limit"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),a("Col",{attrs:{span:"24"}},[t.formValidate.is_limit?a("FormItem",{attrs:{label:"限购类型："}},[a("RadioGroup",{model:{value:t.formValidate.limit_type,callback:function(e){t.$set(t.formValidate,"limit_type",e)},expression:"formValidate.limit_type"}},[a("Radio",{attrs:{label:1}},[t._v("单次限购")]),a("Radio",{attrs:{label:2}},[t._v("永久限购")])],1),a("div",{staticClass:"titTip"},[t._v("单次限购是限制每次下单最多购买的数量，永久限购是限制一个用户总共可以购买的数量")])],1):t._e()],1),t.formValidate.is_limit?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"限购数量：",prop:"limit_num"}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr10"}),a("InputNumber",{attrs:{placeholder:"请输入限购数量",precision:0,min:1},model:{value:t.formValidate.limit_num,callback:function(e){t.$set(t.formValidate,"limit_num",e)},expression:"formValidate.limit_num"}}),a("span",{staticClass:"ml10"},[t._v(" 件 ")])],1)])],1):t._e(),0==t.formValidate.virtual_type||3==t.formValidate.virtual_type?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"预售商品："}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.presale,callback:function(e){t.$set(t.formValidate,"presale",e)},expression:"formValidate.presale"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1):t._e(),t.formValidate.presale?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"预售活动时间：",prop:"presale_time"}},[a("div",{staticClass:"acea-row row-middle"},[a("DatePicker",{attrs:{editable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动时间",value:t.formValidate.presale_time},on:{"on-change":t.onchangeTime},model:{value:t.formValidate.presale_time,callback:function(e){t.$set(t.formValidate,"presale_time",e)},expression:"formValidate.presale_time"}})],1),a("div",{staticClass:"titTip"},[t._v("设置活动开启结束时间，用户可以在设置时间内发起参与预售")])])],1):t._e(),t.formValidate.presale?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"发货时间：",prop:"presale_day"}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr10"},[t._v("预售活动结束后")]),a("InputNumber",{attrs:{placeholder:"请输入发货时间",precision:0,min:1},model:{value:t.formValidate.presale_day,callback:function(e){t.$set(t.formValidate,"presale_day",e)},expression:"formValidate.presale_day"}}),a("span",{staticClass:"ml10"},[t._v(" 天之内 ")]),a("div",{staticClass:"ml10 grey"})],1)])],1):t._e(),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品推荐："}},[a("CheckboxGroup",{on:{"on-change":t.recommendBtn},model:{value:t.formValidate.recommend,callback:function(e){t.$set(t.formValidate,"recommend",e)},expression:"formValidate.recommend"}},[a("Checkbox",{attrs:{label:"is_hot"}},[t._v("热卖单品")]),a("Checkbox",{attrs:{label:"is_benefit"}},[t._v("促销单品")]),a("Checkbox",{attrs:{label:"is_best"}},[t._v("精品推荐")]),a("Checkbox",{attrs:{label:"is_new"}},[t._v("首发新品")]),a("Checkbox",{attrs:{label:"is_good"}},[t._v("优品推荐")])],1)],1)],1),a("Col",t._b({},"Col",t.grid3,!1),[a("FormItem",{attrs:{label:"活动优先级："}},[a("div",{staticClass:"color-list acea-row row-middle"},t._l(t.formValidate.activity,(function(e){return a("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.formValidate.activity,group:"color"},expression:"{\n                  item: color,\n                  list: formValidate.activity,\n                  group: 'color',\n                }"}],key:e,staticClass:"color-item",class:t.activity[e]},[t._v("\n                "+t._s(e)+"\n              ")])})),0),a("div",{staticClass:"titTip"},[t._v("可拖动按钮调整活动的优先展示顺序")])])],1),a("Col",t._b({},"Col",t.grid3,!1),[a("FormItem",{attrs:{label:"选择优品推荐商品："}},[a("div",{staticClass:"picBox"},[t._l(t.formValidate.recommend_list,(function(e,i){return a("div",{key:i,staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemoveRecommend(i)}}})],1)})),a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:t.changeGoods}},[a("Icon",{staticClass:"iconfonts",attrs:{type:"ios-add",size:"26"}})],1)],2)])],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:6===t.headTab.length?"6"===t.currentTab:"5"===t.currentTab,expression:"headTab.length === 6 ? currentTab === '6' : currentTab === '5'"}],attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品关键字："}},[a("Input",{staticClass:"perW20",attrs:{placeholder:"请输入商品关键字"},model:{value:t.formValidate.keyword,callback:function(e){t.$set(t.formValidate,"keyword","string"===typeof e?e.trim():e)},expression:"formValidate.keyword"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品简介："}},[a("Input",{staticClass:"perW20",attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介"},model:{value:t.formValidate.store_info,callback:function(e){t.$set(t.formValidate,"store_info","string"===typeof e?e.trim():e)},expression:"formValidate.store_info"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品口令："}},[a("Input",{staticClass:"perW20",attrs:{placeholder:"请输入商品口令",type:"textarea",rows:3},model:{value:t.formValidate.command_word,callback:function(e){t.$set(t.formValidate,"command_word","string"===typeof e?e.trim():e)},expression:"formValidate.command_word"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品推荐图："}},[a("div",{staticClass:"pictrueBox",on:{click:function(e){return t.modalPicTap("dan","recommend_image")}}},[t.formValidate.recommend_image?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.recommend_image,expression:"formValidate.recommend_image"}]}),a("Input",{staticStyle:{display:"none"},model:{value:t.formValidate.recommend_image,callback:function(e){t.$set(t.formValidate,"recommend_image","string"===typeof e?e.trim():e)},expression:"formValidate.recommend_image"}})],1):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Input",{staticStyle:{display:"none"},model:{value:t.formValidate.recommend_image,callback:function(e){t.$set(t.formValidate,"recommend_image","string"===typeof e?e.trim():e)},expression:"formValidate.recommend_image"}}),a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1),a("div",{staticClass:"titTip"},[t._v("建议比例：5:2")])])])],1),a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"自定义留言："}},[a("i-switch",{attrs:{size:"large"},on:{"on-change":t.customMessBtn},model:{value:t.customBtn,callback:function(e){t.customBtn=e},expression:"customBtn"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),t.customBtn?a("div",{staticClass:"addCustom_content"},t._l(t.formValidate.custom_form,(function(e,i){return a("div",{key:i,staticClass:"custom_box",attrs:{type:"flex"}},[a("Input",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{placeholder:"留言标题"+(i+1)},model:{value:e.title,callback:function(a){t.$set(e,"title","string"===typeof a?a.trim():a)},expression:"item.title"}}),a("Select",{staticStyle:{width:"200px","margin-left":"6px","margin-right":"10px"},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}},t._l(t.CustomList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("Checkbox",{model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}},[t._v("必填")]),a("div",{staticClass:"addfont",on:{click:function(e){return t.delcustom(i)}}},[t._v("删除")])],1)})),0):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.customBtn,expression:"customBtn"}],staticClass:"addCustomBox"},[a("div",{staticClass:"btn",on:{click:t.addcustom}},[t._v("+ 添加表单")]),a("div",{staticClass:"titTip"},[t._v("用户下单时需填写的信息，最多可设置10条")])])],1)],1)],1),a("FormItem",["1"!==t.currentTab?a("Button",{on:{click:t.upTab}},[t._v("上一步")]):t._e(),"6"!==t.currentTab&&0==t.formValidate.virtual_type?a("Button",{staticClass:"submission",attrs:{type:"primary"},on:{click:t.downTab}},[t._v("下一步")]):t._e(),"5"!==t.currentTab&&0!=t.formValidate.virtual_type?a("Button",{staticClass:"submission",attrs:{type:"primary"},on:{click:t.downTab}},[t._v("下一步")]):t._e(),!t.$route.params.id&&"6"!==t.currentTab||0!=t.formValidate.virtual_type?t._e():a("Button",{staticClass:"submission",attrs:{type:"primary",disabled:t.openSubimit},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("保存")]),!t.$route.params.id&&"5"!==t.currentTab||0==t.formValidate.virtual_type?t._e():a("Button",{staticClass:"submission",attrs:{type:"primary",disabled:t.openSubimit},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("保存")])],1),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),a("Modal",{attrs:{width:"1024px",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?a("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic,getPicD:t.getPicD}}):t._e()],1),a("Modal",{attrs:{width:"700px",closable:"",title:"添加卡密","mask-closable":!1,"z-index":1,"footer-hide":""},on:{"on-visible-change":t.initVirtualData},model:{value:t.addVirtualModel,callback:function(e){t.addVirtualModel=e},expression:"addVirtualModel"}},[a("div",{staticClass:"trip"}),a("div",{staticClass:"type-radio"},[a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"卡密类型："}},[a("RadioGroup",{attrs:{size:"large"},model:{value:t.disk_type,callback:function(e){t.disk_type=e},expression:"disk_type"}},[a("Radio",{attrs:{label:1}},[t._v("固定卡密")]),a("Radio",{attrs:{label:2}},[t._v("一次性卡密")])],1),1==t.disk_type?a("div",[a("div",{staticClass:"stock-disk"},[a("Input",{attrs:{size:"large",type:"textarea",rows:4,placeholder:"填写卡密信息"},model:{value:t.disk_info,callback:function(e){t.disk_info=e},expression:"disk_info"}})],1),a("div",{staticClass:"stock-input"},[a("Input",{attrs:{type:"number",size:"large",placeholder:"填写库存数量"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]):t._e(),2==t.disk_type?a("div",{staticClass:"scroll-virtual"},t._l(t.virtualList,(function(e,i){return a("div",{key:i,staticClass:"virtual-data mb10"},[a("span",{staticClass:"mr10 virtual-title"},[t._v("卡号"+t._s(i+1)+"：")]),a("Input",{staticClass:"mr10",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入卡号(非必填)"},model:{value:e.key,callback:function(a){t.$set(e,"key","string"===typeof a?a.trim():a)},expression:"item.key"}}),a("span",{staticClass:"mr10 virtual-title"},[t._v("卡密"+t._s(i+1)+"：")]),a("Input",{staticClass:"mr10",staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入卡密"},model:{value:e.value,callback:function(a){t.$set(e,"value","string"===typeof a?a.trim():a)},expression:"item.value"}}),a("span",{staticClass:"deteal-btn",on:{click:function(e){return t.removeVirtual(i)}}},[t._v("删除")])],1)})),0):t._e(),2==t.disk_type?a("div",{staticClass:"add-more"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v("新增")]),a("Upload",{staticClass:"ml10",attrs:{action:t.cardUrl,data:t.uploadData,"before-upload":t.beforeUpload,headers:t.header,"on-success":t.upFile}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("导入卡密")])],1)],1):t._e()],1)],1)],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"clear",on:{click:t.closeVirtual}},[t._v("取消")]),a("div",{staticClass:"submit",on:{click:t.upVirtual}},[t._v("确认")])])])],1),a("freightTemplate",{ref:"templates",attrs:{template:t.template},on:{changeTemplate:t.changeTemplate}}),a("add-attr",{ref:"addattr",on:{getList:t.userSearchs}}),a("coupon-list",{ref:"couponTemplates",attrs:{couponids:t.formValidate.coupon_ids,updateIds:t.updateIds,updateName:t.updateName},on:{nameId:t.nameId}}),a("coupon-list",{ref:"goodsCoupon",attrs:{many:"one",luckDraw:!0},on:{getCouponId:t.goodsCouponId}}),a("Modal",{staticClass:"Box",attrs:{scrollable:"","footer-hide":"",closable:"",title:"复制淘宝、天猫、京东、苏宁、1688","mask-closable":!1,width:"800",height:"500"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("tao-bao",{ref:"taobaos",on:{"on-close":t.onClose}}):t._e()],1),a("Modal",{staticClass:"paymentFooter",attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},model:{value:t.goods_modals,callback:function(e){t.goods_modals=e},expression:"goods_modals"}},[t.goods_modals?a("goods-list",{ref:"goodslist",attrs:{ischeckbox:!0},on:{getProductId:t.getProductId}}):t._e()],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"500","footer-hide":!0,"mask-closable":!1},model:{value:t.labelShow,callback:function(e){t.labelShow=e},expression:"labelShow"}},[a("userLabel",{ref:"userLabel",on:{activeData:t.activeData,close:t.labelClose}})],1)],1)},r=[],o=a("d0ff"),s=a("c964"),n=a("dde1");function l(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(l)throw o}}}}var c=a("f3f3"),d=(a("96cf"),a("fb6a"),a("d81d"),a("a9e3"),a("4de4"),a("d3b7"),a("a434"),a("e9c4"),a("99af"),a("a4d3"),a("e01a"),a("4ec9"),a("3ca3"),a("ddb0"),a("b0c0"),a("25f0"),a("498a"),a("159b"),a("caad"),a("ac1f"),a("5319"),a("0f0e")),m=a("2f62"),u=a("310e"),p=a.n(u),f=a("b0e7"),h=a("5334"),v=a("e449"),_=a("6fd3"),b=a("6625"),g=a.n(b),y=a("c4ad"),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Box"},[a("Card",[a("div",[t._v("\n      生成的商品默认是没有上架的，请手动上架商品！\n      "),2==t.copyConfig.copy_type?a("a",{attrs:{href:"http://help.crmeb.net/crmeb-v4/1863579",target:"_blank"}},[t._v("如何配置密钥")]):a("span",[t._v("您当前剩余"+t._s(t.copyConfig.copy_num)+"条采集次数，"),a("a",{attrs:{href:"#"},on:{click:function(e){return t.mealPay("copy")}}},[t._v("增加采集次数")])])]),a("div",[t._v("商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置")])]),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{"label-width":120,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"链接地址："}},[a("Input",{staticClass:"numPut",attrs:{search:"","enter-button":"确定",placeholder:"请输入链接地址"},on:{"on-search":t.add},model:{value:t.soure_link,callback:function(e){t.soure_link=e},expression:"soure_link"}})],1)],1)],1)],1),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},k=[],x=(a("00b4"),a("c4c8")),w={name:"taoBao",data:function(){return{soure_link:"",spinShow:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:12,lg:12,md:12,sm:24,xs:24},copyConfig:{copy_type:2,copy_num:0},artFrom:{type:"taobao",url:""}}},computed:{},created:function(){},mounted:function(){this.getCopyConfig()},methods:{mealPay:function(t){this.$router.push({path:"/admin/setting/sms/sms_pay/index",query:{type:t}})},getCopyConfig:function(){var t=this;Object(x["e"])().then((function(e){t.copyConfig.copy_type=e.data.copy_type,t.copyConfig.copy_num=e.data.copy_num}))},add:function(){var t=this;if(this.soure_link){var e=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/;if(!e.test(this.soure_link))return this.$Message.warning("请输入以http开头的地址！");this.spinShow=!0,this.artFrom.url=this.soure_link,Object(x["f"])(this.artFrom).then((function(e){var a=e.data.productInfo;t.$emit("on-close",a),t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))}else this.$Message.warning("请输入链接地址！")}}},C=w,F=(a("a24f"),a("2877")),I=Object(F["a"])(C,V,k,!1,null,"5e4764e5",null),$=I.exports,B=a("a069"),T=a("c24f"),S=a("d708"),N=a("c276"),L=(a("6fad"),a("0e5c")),M={name:"product_productAdd",components:{VueUeditorWrap:g.a,uploadPictures:f["a"],freightTemplate:h["a"],addAttr:_["a"],couponList:v["a"],taoBao:$,draggable:p.a,goodsList:y["default"],WangEditor:B["a"],userLabel:d["a"]},data:function(){return{labelShow:!1,dataLabel:[],headTab:[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"物流设置",name:"4"},{tit:"营销设置",name:"5"},{tit:"其他设置",name:"6"}],virtual:[{tit:"普通商品",id:0,tit2:"物流发货"},{tit:"卡密/网盘",id:1,tit2:"自动发货"},{tit:"优惠卷",id:2,tit2:"自动发货"},{tit:"虚拟商品",id:3,tit2:"虚拟发货"}],seletVideo:0,customBtn:!1,content:"",contents:"",fileUrl:S["a"].apiBaseURL+"/file/upload",fileUrl2:S["a"].apiBaseURL+"/file/video_upload",cardUrl:S["a"].apiBaseURL+"/file/upload/1",upload_type:"",uploadData:{},header:{},type:0,modals:!1,goods_modals:!1,spinShow:!1,openSubimit:!1,virtualData:"",virtualList:[{key:"",value:""}],grid2:{xl:10,lg:12,md:12,sm:24,xs:24},grid3:{xl:18,lg:18,md:20,sm:24,xs:24},oneFormBatch:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}],formDynamic:{attrsName:"",attrsVal:""},disk_type:1,tabIndex:0,tabName:"",formDynamicNameData:[],isBtn:!1,columns2:[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"原价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编号",slot:"bar_code",align:"center",minWidth:120},{title:"重量（KG）",slot:"weight",align:"center",minWidth:95},{title:"体积(m³)",slot:"volume",align:"center",minWidth:95},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:140}],columns3:[{title:"图片",slot:"pic",align:"center",minWidth:80},{title:"售价",slot:"price",align:"center",minWidth:95},{title:"成本价",slot:"cost",align:"center",minWidth:95},{title:"原价",slot:"ot_price",align:"center",minWidth:95},{title:"库存",slot:"stock",align:"center",minWidth:95},{title:"商品编号",slot:"bar_code",align:"center",minWidth:120},{title:"虚拟商品",slot:"fictitious",align:"center",minWidth:95},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:140}],columns:[],columnsInstall:[],columnsInstal2:[],gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},CustomList:[{value:"text",label:"文本框"},{value:"number",label:"数字"},{value:"email",label:"邮件"},{value:"data",label:"日期"},{value:"time",label:"时间"},{value:"id",label:"身份证"},{value:"phone",label:"手机号"},{value:"img",label:"图片"}],customess:{content:[]},formValidate:{disk_info:"",logistics:["1"],freight:2,postage:0,recommend:[],presale_day:1,presale:!1,is_limit:!1,limit_type:0,limit_num:0,video_open:!1,vip_product:!1,custom_form:[],store_name:"",cate_id:[],label_id:[],keyword:"",unit_name:"",store_info:"",image:"",recommend_image:"",slider_image:[],description:"",ficti:0,give_integral:0,sort:0,is_show:1,is_hot:0,is_benefit:0,is_best:0,is_new:0,is_good:0,is_postage:0,is_sub:[],recommend_list:[],virtual_type:0,id:0,spec_type:0,is_virtual:0,video_link:"",temp_id:"",attrs:[],items:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:""}],activity:["默认","秒杀","砍价","拼团"],couponName:[],header:[],selectRule:"",coupon_ids:[],command_word:""},ruleList:[],templateList:[],createBnt:!0,showIput:!1,manyFormValidate:[],oneFormValidate:[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}],images:[],imagesTable:"",currentTab:"1",isChoice:"",grid:{xl:8,lg:8,md:12,sm:24,xs:24},loading:!1,modalPic:!1,addVirtualModel:!1,template:!1,uploadList:[],treeSelect:[],picTit:"",tableIndex:0,ruleValidate:{store_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],cate_id:[{required:!0,message:"请选择商品分类",trigger:"change",type:"array",min:"1"}],unit_name:[{required:!0,message:"请输入单位",trigger:"blur"}],slider_image:[{required:!0,message:"请上传商品轮播图",type:"array",trigger:"change"}],spec_type:[{required:!0,message:"请选择商品规格",trigger:"change"}],is_virtual:[{required:!0,message:"请选择商品类型",trigger:"change"}],selectRule:[{required:!0,message:"请选择商品规格属性",trigger:"change"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change",type:"number"}],presale_time:[{required:!0,type:"array",message:"请选择活动时间",trigger:"change"}],logistics:[{required:!0,type:"array",min:1,message:"请选择物流方式",trigger:"change"},{type:"array",max:2,message:"请选择物流方式",trigger:"change"}],give_integral:[{type:"integer",message:"请输入整数"}]},manyBrokerage:0,manyBrokerageTwo:0,manyVipPrice:0,upload:{videoIng:!1},videoIng:!1,progress:0,stock:0,disk_info:"",videoLink:"",attrs:[],activity:{"默认":"red","秒杀":"blue","砍价":"green","拼团":"yellow"},couponName:[],updateIds:[],updateName:[],couponIds:"",couponNames:[],rakeBack:[{title:"一级返佣",slot:"brokerage",align:"center",width:95},{title:"二级返佣",slot:"brokerage_two",align:"center",width:95}],member:[{title:"会员价",slot:"vip_price",align:"center",width:95}],columnsInstalM:[],moveIndex:""}},computed:Object(c["a"])(Object(c["a"])({},Object(m["e"])("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"},labelBottom:function(){return this.isMobile?void 0:15}}),created:function(){this.columns=this.columns2.slice(0,8),this.getToken()},mounted:function(){var t=this;"0"!==this.$route.params.id&&this.$route.params.id?this.getInfo():"0"===this.$route.params.id&&Object(x["o"])().then((function(e){var a=e.data.info;if(!Array.isArray(a)){var i=a.cate_id.map(Number);a.label_id.map(Number);t.attrs=a.items||[];var r=[];a.coupons&&(a.coupons.map((function(t){r.push(t.id)})),t.couponName=a.coupons),t.formValidate=a,t.dataLabel=a.label_id,t.formValidate.coupon_ids=r,t.updateIds=r,t.updateName=a.coupons,t.formValidate.cate_id=i,t.oneFormValidate=a.attrs,t.formValidate.logistics=a.logistics||["1"],t.formValidate.header=[],t.generate(0),t.manyFormValidate=a.attrs,t.spec_type=a.spec_type,t.formValidate.is_virtual=a.is_virtual,t.formValidate.custom_form=a.custom_form||[],0!=t.formValidate.custom_form.length&&(t.customBtn=!0),t.virtualbtn(a.virtual_type,1),0===a.spec_type?t.manyFormValidate=[]:(t.createBnt=!0,t.oneFormValidate=[{pic:a.image,price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}]),t.spinShow=!1}})).catch((function(e){t.$Message.error(e.msg)})),this.$route.query.type?(this.modals=!0,this.type=this.$route.query.type):this.type=0,this.goodsCategory(),this.productGetRule(),this.productGetTemplate(),this.uploadType()},methods:{activeData:function(t){this.labelShow=!1,this.dataLabel=t},labelClose:function(){this.labelShow=!1},closeLabel:function(t){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1)},openLabel:function(t){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)))},videoSaveToUrl:function(t){var e=this;return Object(L["a"])({file:t,pieceSize:3,success:function(t){e.formValidate.video_link=t.file_path,e.progress=100},error:function(t){e.$Message.error(t.msg)},uploading:function(t,a){e.videoIng=!0;var i=Math.floor(t/a*100);e.progress=i}}),!1},processButtonClick:function(){},virtualbtn:function(t,e){var a=this;if(1!=e){this.formValidate.is_sub=[];var i=this.$route.params.id;i&&Object(x["d"])(i).then((function(t){})).catch((function(t){a.formValidate.spec_type=a.spec_type,a.$Message.error(t.msg)}))}switch(t){case 0:this.formValidate.virtual_type=0,this.formValidate.is_virtual=0,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"物流设置",name:"4"},{tit:"营销设置",name:"5"},{tit:"其他设置",name:"6"}];break;case 1:this.formValidate.virtual_type=1,this.formValidate.postage=0,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"营销设置",name:"4"},{tit:"其他设置",name:"5"}];break;case 2:this.formValidate.virtual_type=2,this.formValidate.is_virtual=1,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"营销设置",name:"4"},{tit:"其他设置",name:"5"}];break;case 3:this.formValidate.virtual_type=3,this.formValidate.is_virtual=1,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"营销设置",name:"4"},{tit:"其他设置",name:"5"}];break;case 1:this.formValidate.virtual_type=1,this.formValidate.is_virtual=1,this.headTab=[{tit:"基础信息",name:"1"},{tit:"规格库存",name:"2"},{tit:"商品详情",name:"3"},{tit:"营销设置",name:"4"},{tit:"其他设置",name:"5"}]}},addCate:function(){var t=this;this.$modalForm(Object(x["p"])()).then((function(){return t.goodsCategory()}))},logisticsBtn:function(t){this.formValidate.logistics=t},addLabel:function(){var t=this;this.$modalForm(Object(T["M"])(0)).then((function(){return t.userLabel()}))},customMessBtn:function(t){t||(this.formValidate.custom_form=[])},addcustom:function(){this.formValidate.custom_form.length>9?this.$Message.warning("最多添加10条"):this.formValidate.custom_form.push({title:"",label:"text",value:"",status:!1})},delcustom:function(t){this.formValidate.custom_form.splice(t,1)},onchangeTime:function(t){this.formValidate.presale_time=t},recommendBtn:function(t){},getEditorContent:function(t){this.content=t},cancel:function(){this.$router.push({path:"/admin/product/product_list"})},getToken:function(){this.header["Authori-zation"]="Bearer "+Object(N["d"])("token")},beforeUpload:function(t){this.video=t.raw},upFile:function(t){var e=this;Object(x["l"])({file:t.data.src}).then((function(t){e.virtualList=e.virtualList.concat(t.data)}))},uploadType:function(){var t=this;Object(x["H"])().then((function(e){t.upload_type=e.data.upload_type}))},infoData:function(t){var e=t.cate_id.map(Number);t.label_id.map(Number);this.attrs=t.items||[];var a=[];t.coupons.map((function(t){a.push(t.id)})),this.formValidate=t,this.seletVideo=t.seletVideo,this.contents=t.description,this.couponName=t.coupons,this.formValidate.coupon_ids=a,this.updateIds=a,this.dataLabel=t.label_id,this.updateName=t.coupons,this.virtualbtn(t.virtual_type,1),this.formValidate.logistics=t.logistics||["1"],this.formValidate.custom_form=t.custom_form||[],0!=this.formValidate.custom_form.length&&(this.customBtn=!0),this.formValidate.cate_id=e,t.attr&&(this.oneFormValidate=[t.attr]),this.formValidate.header=[],this.generate(0),this.$set(this,"manyFormValidate",t.attrs),this.spec_type=t.spec_type,this.formValidate.is_virtual=t.is_virtual,this.virtual[t.is_virtual].id=t.is_virtual,0===t.spec_type?this.manyFormValidate=[]:(this.createBnt=!0,this.oneFormValidate=[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,virtual_list:[],coupon_id:0}])},onClose:function(t){this.modals=!1,this.infoData(t)},checkMove:function(t){this.moveIndex=t.draggedContext.index},end:function(){this.moveIndex=""},checkAllGroupChange:function(t){this.checkAllGroup(t)},checkAllGroup:function(t){0===this.formValidate.spec_type?(t.indexOf(0)>-1?this.columnsInstall=this.columns2.slice(0,4).concat(this.member):t.indexOf(1)>-1?this.columnsInstall=this.columns2.slice(0,4).concat(this.rakeBack):this.columnsInstall=this.columns2.slice(0,4),2===t.length&&(this.columnsInstall=this.columns2.slice(0,4).concat(this.rakeBack).concat(this.member))):(t.indexOf(0)>-1?this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.member):t.indexOf(1)>-1?this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.rakeBack):this.columnsInstal2=this.columnsInstalM.slice(0,4),2===t.length&&(this.columnsInstal2=this.columnsInstalM.slice(0,4).concat(this.rakeBack).concat(this.member)))},addCoupon:function(){this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},see:function(t,e,a){this.tabName=e,this.tabIndex=a,1===this.formValidate.virtual_type?(""!=t.disk_info?(this.disk_type=1,this.disk_info=t.disk_info,this.stock=t.stock):t.virtual_list.length&&(this.disk_type=2,this.virtualList=t.virtual_list),this.addVirtualModel=!0):(this.$refs.goodsCoupon.isTemplate=!0,this.$refs.goodsCoupon.tableList(3))},addGoodsCoupon:function(t,e){this.tabIndex=t,this.tabName=e,this.$refs.goodsCoupon.isTemplate=!0,this.$refs.goodsCoupon.tableList(3)},addVirtual:function(t,e){this.tabIndex=t,this.tabName=e,this.addVirtualModel=!0},upVirtual:function(){if(2==this.disk_type){for(var t=0;t<this.virtualList.length;t++){var e=this.virtualList[t];if(!e.value)return void this.$Message.error("请输入所有卡密")}this.$set(this[this.tabName][this.tabIndex],"virtual_list",this.virtualList),this.$set(this[this.tabName][this.tabIndex],"stock",this.virtualList.length),this.virtualList=[{key:"",value:""}],this.$set(this[this.tabName][this.tabIndex],"disk_info","")}else{if(!this.disk_info.length)return this.$Message.error("请填写卡密信息");if(!this.stock)return this.$Message.error("请填写库存数量");this.$set(this[this.tabName][this.tabIndex],"stock",Number(this.stock)),this.$set(this[this.tabName][this.tabIndex],"stock",Number(this.stock)),this.$set(this[this.tabName][this.tabIndex],"disk_info",this.disk_info),this.$set(this[this.tabName][this.tabIndex],"virtual_list",[])}this.addVirtualModel=!1,this.closeVirtual()},closeVirtual:function(){this.addVirtualModel=!1,this.virtualList=[{key:"",value:""}],this.disk_info="",this.stock=0},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},nameId:function(t,e){this.formValidate.coupon_ids=t,this.couponName=this.unique(e)},goodsCouponId:function(t){this.$set(this[this.tabName][this.tabIndex],"coupon_id",t.id),this.$set(this[this.tabName][this.tabIndex],"coupon_name",t.title),this.$refs.goodsCoupon.isTemplate=!1},handleClose:function(t){var e=this.couponName.indexOf(t);this.couponName.splice(e,1);var a=this.formValidate.coupon_ids;a.splice(e,1),this.updateIds=a,this.updateName=this.couponName},getList:function(){this.productGetTemplate()},addTemp:function(){this.$refs.templates.isTemplate=!0},delVideo:function(){var t=this;t.$set(t.formValidate,"video_link",""),t.$set(t,"progress",0),t.videoIng=!1,t.upload.videoIng=!1},zh_uploadFile:function(){1==this.seletVideo?this.formValidate.video_link=this.videoLink:this.$refs.refid.click()},zh_uploadFile_change:function(t){var e=this,a=t.target.files[0].name.substr(t.target.files[0].name.indexOf("."));if(-1===a.indexOf(".mp4"))return e.$Message.error("只能上传MP4文件");Object(x["s"])().then((function(a){console.log(a,"??"),e.$videoCloud.videoUpload({type:a.data.type,evfile:t,res:a,uploading:function(t,i){e.upload.videoIng=t,200==a.status&&(e.progress=100)}}).then((function(t){e.formValidate.video_link=t.url,e.$Message.success("视频上传成功"),e.upload.videoIng=!1})).catch((function(t){e.$Message.error(t)}))})).catch((function(t){e.$Message.error(t.msg)}))},upTab:function(){this.currentTab=(Number(this.currentTab)-1).toString()},downTab:function(){this.currentTab=(Number(this.currentTab)+1).toString()},userSearchs:function(){this.productGetRule()},addRule:function(){this.$refs.addattr.modal=!0},brokerageSetUp:function(){var t=this;if(t.formValidate.is_sub.indexOf(1)>-1){if(t.manyBrokerage<=0||t.manyBrokerageTwo<=0)return t.$Message.error("请填写返佣金额后进行批量添加")}else if(t.formValidate.is_sub.indexOf(0)>-1&&t.manyVipPrice<=0)return t.$Message.error("请填写会员价后进行批量添加");if(2===this.formValidate.is_sub.length&&(t.manyBrokerage<=0||t.manyBrokerageTwo<=0||t.manyVipPrice<=0))return t.$Message.error("请填写完金额后进行批量添加");var e,a=l(t.manyFormValidate);try{for(a.s();!(e=a.n()).done;){var i=e.value;this.$set(i,"brokerage",t.manyBrokerage),this.$set(i,"brokerage_two",t.manyBrokerageTwo),this.$set(i,"vip_price",t.manyVipPrice)}}catch(r){a.e(r)}finally{a.f()}},vipPriceSetUp:function(){var t=this;if(t.manyVipPrice<=0)return t.$Message.error("请填写会员价在进行批量添加");var e,a=l(t.manyFormValidate);try{for(a.s();!(e=a.n()).done;){var i=e.value;this.$set(i,"vip_price",t.manyVipPrice)}}catch(r){a.e(r)}finally{a.f()}},handleAdd:function(){this.virtualList.push({key:"",value:""})},initVirtualData:function(t){t||(this.virtualList=[{key:"",value:""}])},removeVirtual:function(t){this.virtualList.splice(t,1)},batchDel:function(){this.oneFormBatch=[{pic:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0}]},confirm:function(){var t=this;if(t.createBnt=!0,t.formValidate.selectRule.trim().length<=0)return t.$Message.error("请选择属性");t.ruleList.forEach((function(e,a){e.rule_name===t.formValidate.selectRule&&(t.attrs=e.rule_value)}))},productGetRule:function(){var t=this;Object(x["r"])().then((function(e){t.ruleList=e.data}))},productGetTemplate:function(){var t=this;Object(x["t"])().then((function(e){t.templateList=e.data}))},delAttrTable:function(t){var e=this,a=this.$route.params.id;a?Object(x["d"])(a).then((function(a){e.manyFormValidate.splice(t,1),e.$Message.success(a.msg)})).catch((function(t){e.$Message.error(t.msg)})):this.manyFormValidate.splice(t,1)},batchAdd:function(){var t,e=l(this.manyFormValidate);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.oneFormBatch[0].pic&&this.$set(a,"pic",this.oneFormBatch[0].pic),this.oneFormBatch[0].price>0&&this.$set(a,"price",this.oneFormBatch[0].price),this.oneFormBatch[0].cost>0&&this.$set(a,"cost",this.oneFormBatch[0].cost),this.oneFormBatch[0].ot_price>0&&this.$set(a,"ot_price",this.oneFormBatch[0].ot_price),this.oneFormBatch[0].stock>0&&this.$set(a,"stock",this.oneFormBatch[0].stock),""!==this.oneFormBatch[0].bar_code&&this.$set(a,"bar_code",this.oneFormBatch[0].bar_code),this.oneFormBatch[0].weight>0&&this.$set(a,"weight",this.oneFormBatch[0].weight),this.oneFormBatch[0].volume>0&&this.$set(a,"volume",this.oneFormBatch[0].volume)}}catch(i){e.e(i)}finally{e.f()}},addBtn:function(){this.clearAttr(),this.createBnt=!1,this.showIput=!0},generate:function(t){var e=this;Object(x["i"])({attrs:this.attrs,is_virtual:[1,2].includes(this.formValidate.virtual_type)?1:0,virtual_type:this.formValidate.virtual_type},this.formValidate.id,t).then((function(a){var i=a.data.info,r=JSON.parse(JSON.stringify(i.header));"0"===e.$route.params.id||-1==e.$route.query.type&&!t||(e.manyFormValidate=i.value);var o=i.header;[1,2].includes(e.formValidate.virtual_type)?(e.columnsInstalM=o,e.formValidate.header=o):(e.formValidate.header=r,e.columnsInstalM=i.header),e.checkAllGroup(e.formValidate.is_sub),e.$route.params.id||1!==e.formValidate.spec_type?e.$route.params.id&&(e.manyFormValidate.map((function(t){t.pic||(t.pic=e.formValidate.image)})),e.oneFormBatch[0].pic=e.formValidate.image):(e.manyFormValidate.map((function(t){t.pic=e.formValidate.image})),e.oneFormBatch[0].pic=e.formValidate.image)})).catch((function(t){e.$Message.error(t.msg)}))},offAttrName:function(){this.showIput=!1,this.createBnt=!0},clearAttr:function(){this.formDynamic.attrsName="",this.formDynamic.attrsVal=""},handleRemoveRole:function(t){this.attrs.splice(t,1),this.manyFormValidate.splice(t,1)},handleRemove2:function(t,e){t.splice(e,1)},createAttrName:function(){if(this.formDynamic.attrsName&&this.formDynamic.attrsVal){var t={value:this.formDynamic.attrsName,detail:[this.formDynamic.attrsVal]};this.attrs.push(t);var e={};this.attrs=this.attrs.reduce((function(t,a){return!e[a.value]&&(e[a.value]=t.push(a)),t}),[]),this.clearAttr(),this.showIput=!1,this.createBnt=!0}else this.$Message.warning("请添加完整的规格！")},createAttr:function(t,e){if(t){this.attrs[e].detail.push(t);var a={};this.attrs[e].detail=this.attrs[e].detail.reduce((function(t,e){return!a[e]&&(a[e]=t.push(e)),t}),[])}else this.$Message.warning("请添加属性")},goodsCategory:function(){var t=this;Object(x["G"])(1).then((function(e){t.treeSelect=e.data})).catch((function(e){t.$Message.error(e.msg)}))},changeVideo:function(t){this.formValidate.video_link="",this.videoLink=""},changeSpec:function(){var t=this;this.formValidate.is_sub=[];var e=this.$route.params.id;e&&Object(x["d"])(e).then((function(t){})).catch((function(e){t.formValidate.spec_type=t.spec_type,t.$Message.error(e.msg)}))},getInfo:function(){var t=this,e=this;e.spinShow=!0,Object(x["u"])(e.$route.params.id).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=a.data.productInfo,t.infoData(i),t.spinShow=!1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},onhangeTab:function(t){this.currentTab=t},handleRemove:function(t){this.images.splice(t,1),this.formValidate.slider_image.splice(t,1),this.oneFormValidate[0].pic=this.formValidate.slider_image[0]},changeCancel:function(t){this.modalPic=!1},modalPicTap:function(t,e,a){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e,this.tableIndex=a},getPic:function(t){switch(this.picTit){case"danFrom":this.formValidate.image=t.att_dir,this.$route.params.id||(0===this.formValidate.spec_type?this.oneFormValidate[0].pic=t.att_dir:(this.manyFormValidate.map((function(e){e.pic=t.att_dir})),this.oneFormBatch[0].pic=t.att_dir));break;case"danTable":this.oneFormValidate[this.tableIndex].pic=t.att_dir;break;case"duopi":this.oneFormBatch[this.tableIndex].pic=t.att_dir;break;case"recommend_image":this.formValidate.recommend_image=t.att_dir;break;default:this.manyFormValidate[this.tableIndex].pic=t.att_dir}this.modalPic=!1},getPicD:function(t){var e=this;this.images=t,this.images.map((function(t){e.formValidate.slider_image.push(t.att_dir),e.formValidate.slider_image=e.formValidate.slider_image.splice(0,10)})),this.oneFormValidate[0].pic=this.formValidate.slider_image[0],this.modalPic=!1},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){if(e.formValidate.type=e.type,0===e.formValidate.spec_type?(e.formValidate.attrs=e.oneFormValidate,e.formValidate.header=[],e.formValidate.items=[],e.formValidate.is_copy=0):(e.formValidate.items=e.attrs,e.formValidate.attrs=e.manyFormValidate,e.formValidate.is_copy=1),1===e.formValidate.spec_type&&0===e.manyFormValidate.length)return e.$Message.warning("商品信息-请点击生成多规格");for(var a=e.formValidate.attrs,i=0;i<a.length;i++)if(a[i].stock>1e6)return e.$Message.error("规格库存-库存超出系统范围(1000000)");if(1===e.formValidate.is_sub[0]){for(var r=0;r<a.length;r++)if(null===a[r].brokerage||null===a[r].brokerage_two)return e.$Message.error("营销设置- 一二级返佣不能为空")}else for(var o=0;o<a.length;o++)if(null===a[o].vip_price)return e.$Message.error("营销设置-会员价不能为空");if(2===e.formValidate.is_sub.length)for(var n=0;n<a.length;n++)if(null===a[n].brokerage||null===a[n].brokerage_two||null===a[n].vip_price)return e.$Message.error("营销设置- 一二级返佣和会员价不能为空");if(3==e.formValidate.freight&&!e.formValidate.temp_id)return e.$Message.warning("商品信息-运费模板不能为空");var l=[];e.dataLabel.forEach((function(t){l.push(t.id)})),e.formValidate.label_id=l,e.openSubimit=!0,e.formValidate.description=e.formatRichText(e.content),Object(x["n"])(e.formValidate).then(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.openSubimit=!1,e.$Message.success(a.msg),"0"===e.$route.params.id&&Object(x["b"])().catch((function(t){e.$Message.error(t.msg)})),setTimeout((function(){e.openSubimit=!1,e.$router.push({path:"/admin/product/product_list"})}),500);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){setTimeout((function(t){e.openSubimit=!1}),1e3),e.$Message.error(t.msg)}))}else{if(!e.formValidate.store_name)return e.$Message.warning("商品信息-商品名称不能为空");if(!e.formValidate.cate_id.length)return e.$Message.warning("商品信息-商品分类不能为空");if(!e.formValidate.unit_name)return e.$Message.warning("商品信息-商品单位不能为空");if(!e.formValidate.slider_image.length)return e.$Message.warning("商品信息-商品轮播图不能为空");if(!e.formValidate.logistics.length&&!e.formValidate.virtual_type)return e.$Message.warning("物流设置-至少选择一种物流方式");if(!e.formValidate.temp_id&&3==e.formValidate.freight)return e.$Message.warning("商品信息-运费模板不能为空")}}))},changeTemplate:function(t){this.template=t},validate:function(t,e,a){!1===e&&this.$Message.warning(a)},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var a=Object(o["a"])(this.formValidate.slider_image),i=a.indexOf(this.dragging),r=a.indexOf(e);a.splice.apply(a,[r,0].concat(Object(o["a"])(a.splice(i,1)))),this.formValidate.slider_image=a}},formatRichText:function(t){var e=t.replace(/<img[^>]*>/gi,(function(t,e){return t=t.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,""),t=t.replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,""),t=t.replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,""),t}));return e=e.replace(/style="[^"]+"/gi,(function(t,e){return t=t.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;"),t})),e=e.replace(/<br[^>]*\/>/gi,""),e=e.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;"'),e},getProductId:function(t){this.goods_modals=!1;var e=this.formValidate.recommend_list.concat(t);this.formValidate.recommend_list=this.uniques(e)},changeGoods:function(){this.goods_modals=!0,this.$refs.goodslist.getList(),this.$refs.goodslist.goodsCategory()},uniques:function(t){for(var e={},a=[],i=0;i<t.length;i++)e[t[i].product_id]=t[i];for(var r in e)a.push(e[r]);return a},handleRemoveRecommend:function(t){this.formValidate.recommend_list.splice(t,1)}}},O=M,D=(a("d1d7"),a("9df6"),Object(F["a"])(O,i,r,!1,null,"78c5a54c",null));e["default"]=D.exports},d1d7:function(t,e,a){"use strict";var i=a("f566"),r=a.n(i);r.a},d8cb:function(t,e,a){"use strict";var i=a("807c"),r=a.n(i);r.a},d9f5:function(t,e,a){"use strict";var i=a("23e7"),r=a("da84"),o=a("c65b"),s=a("e330"),n=a("c430"),l=a("83ab"),c=a("4930"),d=a("d039"),m=a("1a2d"),u=a("3a9b"),p=a("825a"),f=a("fc6a"),h=a("a04b"),v=a("577e"),_=a("5c6c"),b=a("7c73"),g=a("df75"),y=a("241c"),V=a("057f"),k=a("7418"),x=a("06cf"),w=a("9bf2"),C=a("37e8"),F=a("d1e7"),I=a("cb2d"),$=a("5692"),B=a("f772"),T=a("d012"),S=a("90e3"),N=a("b622"),L=a("e538"),M=a("746f"),O=a("57b9"),D=a("d44e"),R=a("69f3"),P=a("b727").forEach,A=B("hidden"),j="Symbol",W="prototype",E=R.set,z=R.getterFor(j),G=Object[W],q=r.Symbol,U=q&&q[W],J=r.TypeError,H=r.QObject,K=x.f,Y=w.f,Q=V.f,X=F.f,Z=s([].push),tt=$("symbols"),et=$("op-symbols"),at=$("wks"),it=!H||!H[W]||!H[W].findChild,rt=l&&d((function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,a){var i=K(G,e);i&&delete G[e],Y(t,e,a),i&&t!==G&&Y(G,e,i)}:Y,ot=function(t,e){var a=tt[t]=b(U);return E(a,{type:j,tag:t,description:e}),l||(a.description=e),a},st=function(t,e,a){t===G&&st(et,e,a),p(t);var i=h(e);return p(a),m(tt,i)?(a.enumerable?(m(t,A)&&t[A][i]&&(t[A][i]=!1),a=b(a,{enumerable:_(0,!1)})):(m(t,A)||Y(t,A,_(1,{})),t[A][i]=!0),rt(t,i,a)):Y(t,i,a)},nt=function(t,e){p(t);var a=f(e),i=g(a).concat(ut(a));return P(i,(function(e){l&&!o(ct,a,e)||st(t,e,a[e])})),t},lt=function(t,e){return void 0===e?b(t):nt(b(t),e)},ct=function(t){var e=h(t),a=o(X,this,e);return!(this===G&&m(tt,e)&&!m(et,e))&&(!(a||!m(this,e)||!m(tt,e)||m(this,A)&&this[A][e])||a)},dt=function(t,e){var a=f(t),i=h(e);if(a!==G||!m(tt,i)||m(et,i)){var r=K(a,i);return!r||!m(tt,i)||m(a,A)&&a[A][i]||(r.enumerable=!0),r}},mt=function(t){var e=Q(f(t)),a=[];return P(e,(function(t){m(tt,t)||m(T,t)||Z(a,t)})),a},ut=function(t){var e=t===G,a=Q(e?et:f(t)),i=[];return P(a,(function(t){!m(tt,t)||e&&!m(G,t)||Z(i,tt[t])})),i};c||(q=function(){if(u(U,this))throw J("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=S(t),a=function(t){this===G&&o(a,et,t),m(this,A)&&m(this[A],e)&&(this[A][e]=!1),rt(this,e,_(1,t))};return l&&it&&rt(G,e,{configurable:!0,set:a}),ot(e,t)},U=q[W],I(U,"toString",(function(){return z(this).tag})),I(q,"withoutSetter",(function(t){return ot(S(t),t)})),F.f=ct,w.f=st,C.f=nt,x.f=dt,y.f=V.f=mt,k.f=ut,L.f=function(t){return ot(N(t),t)},l&&(Y(U,"description",{configurable:!0,get:function(){return z(this).description}}),n||I(G,"propertyIsEnumerable",ct,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:q}),P(g(at),(function(t){M(t)})),i({target:j,stat:!0,forced:!c},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!l},{create:lt,defineProperty:st,defineProperties:nt,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:mt}),O(),D(q,j),T[A]=!0},e01a:function(t,e,a){"use strict";var i=a("23e7"),r=a("83ab"),o=a("da84"),s=a("e330"),n=a("1a2d"),l=a("1626"),c=a("3a9b"),d=a("577e"),m=a("9bf2").f,u=a("e893"),p=o.Symbol,f=p&&p.prototype;if(r&&l(p)&&(!("description"in f)||void 0!==p().description)){var h={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=c(f,this)?new p(t):void 0===t?p():p(t);return""===t&&(h[e]=!0),e};u(v,p),v.prototype=f,f.constructor=v;var _="Symbol(test)"==String(p("test")),b=s(f.toString),g=s(f.valueOf),y=/^Symbol\((.*)\)[^)]+$/,V=s("".replace),k=s("".slice);m(f,"description",{configurable:!0,get:function(){var t=g(this),e=b(t);if(n(h,t))return"";var a=_?k(e,7,-1):V(e,y,"$1");return""===a?void 0:a}}),i({global:!0,constructor:!0,forced:!0},{Symbol:v})}},e449:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"优惠券列表",width:"60%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.isTemplate,callback:function(e){t.isTemplate=e},expression:"isTemplate"}},[a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.couponList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-select":t.handleSelectRow,"on-select-cancel":t.handleCancelRow,"on-select-all":t.handleSelectAll,"on-select-all-cancel":t.handleSelectAll},scopedSlots:t._u([{key:"count",fn:function(e){var i=e.row;e.index;return[i.is_permanent?a("span",[t._v("不限量")]):a("div",[a("span",{staticClass:"fa"},[t._v("发布："+t._s(i.total_count))]),a("span",{staticClass:"sheng"},[t._v("剩余："+t._s(i.remain_count))])])]}},{key:"start_time",fn:function(e){var i=e.row;e.index;return[i.start_time?a("div",[t._v(t._s(t._f("formatDate")(i.start_time))+" - "+t._s(t._f("formatDate")(i.end_time)))]):a("span",[t._v("不限时")])]}},{key:"type",fn:function(e){var i=e.row;return[1===i.type?a("span",[t._v("品类券")]):2===i.type?a("span",[t._v("商品券")]):3===i.type?a("span",[t._v("会员券")]):a("span",[t._v("通用券")])]}},{key:"status",fn:function(e){var i=e.row;e.index;return[a("Tag",{directives:[{name:"show",rawName:"v-show",value:1===i.status,expression:"row.status === 1"}],attrs:{color:"blue"}},[t._v("正常")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:0===i.status,expression:"row.status === 0"}],attrs:{color:"gold"}},[t._v("未开启")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:-1===i.status,expression:"row.status === -1"}],attrs:{color:"red"}},[t._v("已失效")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,"show-elevator":"","show-total":"","page-size":t.tableFrom.limit},on:{"on-change":t.receivePageChange}})],1)],1)],1)},r=[],o=a("d0ff"),s=(a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("4ec9"),a("4de4"),a("159b"),a("a630"),a("a434"),a("b7be")),n=a("61f7"),l={name:"index",filters:{formatDate:function(t){if(0!==t){var e=new Date(1e3*t);return Object(n["a"])(e,"yyyy-MM-dd hh:mm")}}},props:{couponids:{type:Array},updateIds:{type:Array},updateName:{type:Array},luckDraw:{type:Boolean,default:!1}},data:function(){return{currentid:0,productRow:{},isTemplate:!1,loading:!1,tableFrom:{receive_type:3,page:1,limit:10},total:0,ids:[],texts:[],columns:[{title:"ID",key:"id",width:60},{title:"优惠券名称",key:"title",minWidth:150},{title:"优惠券类型",slot:"type",minWidth:80},{title:"面值",key:"coupon_price",minWidth:100},{title:"最低消费额",key:"use_min_price",minWidth:100},{title:"发布数量",slot:"count",minWidth:120},{title:"有效期限",slot:"start_time",minWidth:120},{title:"状态",slot:"status",minWidth:80}],couponList:[],selectedIds:new Set,selectedNames:new Set}},mounted:function(){},watch:{updateIds:function(t){this.selectedIds=new Set(t)},updateName:function(t){this.selectedNames=new Set(t)}},created:function(){var t=this,e={width:60,align:"center",render:function(e,a){var i=a.row.id,r=!1;r=t.currentid===i;var o=t;return e("div",[e("Radio",{props:{value:r},on:{"on-change":function(){o.currentid=i,t.productRow=a.row}}})])}},a={type:"selection",width:60,align:"center"};this.luckDraw?this.columns.unshift(e):this.columns.unshift(a)},methods:{unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},handleSelectAll:function(t){var e=this;if(0===t.length){var a=this,i=a.$refs.table.data;i.forEach((function(t){if(a.selectedIds.has(t.id)){a.selectedIds.delete(t.id);var e=a.unique(Array.from(a.selectedNames));a.unique(Array.from(a.selectedNames)).forEach((function(a,i){a.id===t.id&&e.splice(i,1)})),a.selectedNames=new Set(e)}}))}else t.forEach((function(t){e.selectedIds.add(t.id),e.selectedNames.add({id:t.id,title:t.title})}));this.$nextTick((function(){e.setChecked()}))},handleSelectRow:function(t,e){var a=this;this.selectedIds.add(e.id),this.selectedNames.add({id:e.id,title:e.title}),this.$nextTick((function(){a.setChecked()}))},handleCancelRow:function(t,e){var a=this,i=this;i.selectedIds.delete(e.id);var r=Array.from(i.selectedNames);Array.from(i.selectedNames).forEach((function(t,a){t.id===e.id&&r.splice(a,1)})),i.selectedNames=new Set(r),this.$nextTick((function(){a.setChecked()}))},setChecked:function(){this.ids=Object(o["a"])(this.selectedIds),this.texts=Object(o["a"])(this.selectedNames);var t=this.$refs.table.objData;for(var e in t)this.selectedIds.has(t[e].id)&&(t[e]._isChecked=!0)},cancel:function(){this.isTemplate=!1,this.luckDraw&&(this.currentid=0)},tableList:function(){var t=this;this.loading=!0,Object(s["gb"])(this.tableFrom).then((function(e){var a=e.data;t.couponList=a.list,t.$nextTick((function(){t.setChecked()})),t.total=a.count,t.loading=!1}))},ok:function(){this.luckDraw?(this.$emit("getCouponId",this.productRow),this.currentid=0):this.$emit("nameId",this.ids,this.texts)},receivePageChange:function(t){this.tableFrom.page=t,this.tableList()}}},c=l,d=a("2877"),m=Object(d["a"])(c,i,r,!1,null,"acad378a",null);e["a"]=m.exports},e538:function(t,e,a){var i=a("b622");e.f=i},edd0:function(t,e,a){var i=a("13d2"),r=a("9bf2");t.exports=function(t,e,a){return a.get&&i(a.get,e,{getter:!0}),a.set&&i(a.set,e,{setter:!0}),r.f(t,e,a)}},f566:function(t,e,a){}}]);