(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b18da8"],{1184:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"e",(function(){return u}));r("99af");var i=r("6b6c");function a(e){return Object(i["a"])({url:"marketing/lottery/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"marketing/lottery/factor_info/".concat(e),method:"get"})}function o(e){return Object(i["a"])({url:"marketing/lottery/add",method:"post",data:e})}function l(e,t){return Object(i["a"])({url:"marketing/lottery/edit/".concat(e),method:"put",data:t})}function s(e){return Object(i["a"])({url:"marketing/lottery/set_status/".concat(e.id,"/").concat(e.status),method:"post"})}function c(e){return Object(i["a"])({url:"marketing/lottery/record/list",method:"get",params:e})}function u(e){return Object(i["a"])({url:"marketing/lottery/record/deliver",method:"post",data:e})}},"18ca":function(e,t,r){},"2c3e":function(e,t,r){var i=r("da84"),a=r("83ab"),n=r("9f7f").MISSED_STICKY,o=r("c6b6"),l=r("edd0"),s=r("69f3").get,c=RegExp.prototype,u=i.TypeError;a&&n&&l(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===o(this))return!!s(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"4d63":function(e,t,r){var i=r("83ab"),a=r("da84"),n=r("e330"),o=r("94ca"),l=r("7156"),s=r("9112"),c=r("241c").f,u=r("3a9b"),d=r("44e7"),m=r("577e"),f=r("90d8"),p=r("9f7f"),h=r("aeb0"),v=r("cb2d"),g=r("d039"),b=r("1a2d"),y=r("69f3").enforce,_=r("2626"),k=r("b622"),F=r("fce3"),x=r("107c"),w=k("match"),T=a.RegExp,M=T.prototype,R=a.SyntaxError,j=n(M.exec),O=n("".charAt),C=n("".replace),E=n("".indexOf),$=n("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,L=/a/g,S=/a/g,D=new T(L)!==L,z=p.MISSED_STICKY,V=p.UNSUPPORTED_Y,q=i&&(!D||z||F||x||g((function(){return S[w]=!1,T(L)!=L||T(S)==S||"/a/i"!=T(L,"i")}))),W=function(e){for(var t,r=e.length,i=0,a="",n=!1;i<=r;i++)t=O(e,i),"\\"!==t?n||"."!==t?("["===t?n=!0:"]"===t&&(n=!1),a+=t):a+="[\\s\\S]":a+=t+O(e,++i);return a},A=function(e){for(var t,r=e.length,i=0,a="",n=[],o={},l=!1,s=!1,c=0,u="";i<=r;i++){if(t=O(e,i),"\\"===t)t+=O(e,++i);else if("]"===t)l=!1;else if(!l)switch(!0){case"["===t:l=!0;break;case"("===t:j(I,$(e,i+1))&&(i+=2,s=!0),a+=t,c++;continue;case">"===t&&s:if(""===u||b(o,u))throw new R("Invalid capture group name");o[u]=!0,n[n.length]=[u,c],s=!1,u="";continue}s?u+=t:a+=t}return[a,n]};if(o("RegExp",q)){for(var P=function(e,t){var r,i,a,n,o,c,p=u(M,this),h=d(e),v=void 0===t,g=[],b=e;if(!p&&h&&v&&e.constructor===P)return e;if((h||u(M,e))&&(e=e.source,v&&(t=f(b))),e=void 0===e?"":m(e),t=void 0===t?"":m(t),b=e,F&&"dotAll"in L&&(i=!!t&&E(t,"s")>-1,i&&(t=C(t,/s/g,""))),r=t,z&&"sticky"in L&&(a=!!t&&E(t,"y")>-1,a&&V&&(t=C(t,/y/g,""))),x&&(n=A(e),e=n[0],g=n[1]),o=l(T(e,t),p?this:M,P),(i||a||g.length)&&(c=y(o),i&&(c.dotAll=!0,c.raw=P(W(e),r)),a&&(c.sticky=!0),g.length&&(c.groups=g)),e!==b)try{s(o,"source",""===b?"(?:)":b)}catch(_){}return o},Y=c(T),G=0;Y.length>G;)h(P,T,Y[G++]);M.constructor=P,P.prototype=M,v(a,"RegExp",P,{constructor:!0})}_("RegExp")},"61f7":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return u}));var i=r("fc11"),a=r("f3f3");r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("498a"),r("d3b7"),r("b64b"),r("99af");function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in r)if(new RegExp("(".concat(i,")")).test(t)){var a=r[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?a:o(a))}return t}function o(e){return("00"+e).substr(e.length)}var l={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};var s=function(e,t){e.message=function(e){return t.replace("%s",e||"")}};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])({required:!0,message:e,type:"string"},t)}function u(e){return d.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,e)}s(c,"请输入%s"),s(u,"%s格式不正确");var d=Object.keys(l).reduce((function(e,t){return e[t]=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="range"===t?{min:e[0],max:e[1]}:Object(i["a"])({},t,e);return Object(a["a"])(Object(a["a"])({message:r.replace(":".concat(t),"range"===t?"".concat(e[0],"-").concat(e[1]):e),type:"string"},o),n)},s(e[t],l[t]),e}),{})},a15b:function(e,t,r){"use strict";var i=r("23e7"),a=r("e330"),n=r("44ad"),o=r("fc6a"),l=r("a640"),s=a([].join),c=n!=Object,u=l("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s(o(this),void 0===e?",":e)}})},c607:function(e,t,r){var i=r("da84"),a=r("83ab"),n=r("fce3"),o=r("c6b6"),l=r("edd0"),s=r("69f3").get,c=RegExp.prototype,u=i.TypeError;a&&n&&l(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===o(this))return!!s(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},ca99:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"i-layout-page-header"},[r("div",{staticClass:"i-layout-page-header"},[r("span",{staticClass:"ivu-page-header-title"},[e._v(e._s(e.$route.meta.title))])])]),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"tableFrom",attrs:{model:e.tableFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[r("Row",{attrs:{type:"flex",gutter:24}},[r("Col",[r("FormItem",{attrs:{label:"活动类型：",clearable:""}},[r("RadioGroup",{staticClass:"mr",attrs:{type:"button"},on:{"on-change":function(t){return e.selectChangeFactor()}},model:{value:e.tableFrom.factor,callback:function(t){e.$set(e.tableFrom,"factor",t)},expression:"tableFrom.factor"}},[r("Radio",{attrs:{label:1}},[e._v("积分抽取")]),r("Radio",{attrs:{label:3}},[e._v("订单支付")]),r("Radio",{attrs:{label:4}},[e._v("订单评价")])],1)],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"时间选择："}},[r("RadioGroup",{staticClass:"mr",attrs:{type:"button"},on:{"on-change":function(t){return e.selectChange(e.tableFrom.data)}},model:{value:e.tableFrom.data,callback:function(t){e.$set(e.tableFrom,"data",t)},expression:"tableFrom.data"}},e._l(e.fromList.fromTxt,(function(t,i){return r("Radio",{key:i,attrs:{label:t.val}},[e._v(e._s(t.text))])})),1),r("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"自定义时间"},on:{"on-change":e.onchangeTime}})],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"奖品类型："}},[r("RadioGroup",{staticClass:"mr",attrs:{type:"button"},on:{"on-change":function(t){return e.selectType()}},model:{value:e.tableFrom.type,callback:function(t){e.$set(e.tableFrom,"type",t)},expression:"tableFrom.type"}},e._l(e.typeList,(function(t,i){return r("Radio",{key:i,attrs:{label:t.val}},[e._v(e._s(t.text))])})),1)],1)],1),r("Col",e._b({},"Col",e.grid,!1),[r("FormItem",{attrs:{label:"搜索用户：","label-for":"store_name"}},[r("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入用户信息"},on:{"on-search":e.userSearchs},model:{value:e.tableFrom.keyword,callback:function(t){e.$set(e.tableFrom,"keyword",t)},expression:"tableFrom.keyword"}})],1)],1)],1)],1),r("Table",{attrs:{columns:e.columns1,data:e.tableList,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"is_fail",fn:function(e){var t=e.row;e.index;return[1===t.is_fail?r("Icon",{attrs:{type:"md-checkmark",color:"#0092DC",size:"14"}}):r("Icon",{attrs:{type:"md-close",color:"#ed5565",size:"14"}})]}},{key:"user",fn:function(t){var i=t.row;t.index;return[r("span",[e._v(e._s(i.user.nickname)+" ")])]}},{key:"mark",fn:function(t){var i=t.row;t.index;return[r("span",[e._v(e._s(i.deliver_info.mark))])]}},{key:"receive_info",fn:function(t){var i=t.row;t.index;return[i.receive_info.name?r("div",[r("div",[e._v("姓名："+e._s(i.receive_info.name))]),r("div",[e._v("电话："+e._s(i.receive_info.phone))]),r("div",[e._v("地址："+e._s(i.receive_info.address))]),i.receive_info.mark?r("div",[e._v("备注："+e._s(i.receive_info.mark))]):e._e()]):e._e()]}},{key:"prize",fn:function(t){var i=t.row;t.index;return[r("div",{staticClass:"prize"},[r("img",{attrs:{src:i.prize.image,alt:""}}),r("span",[e._v(e._s(i.prize.name))])])]}},{key:"action",fn:function(t){var i=t.row;t.index;return[6==i.type&&0===i.is_deliver?r("a",{on:{click:function(t){return e.deliver(i,1)}}},[e._v("发货")]):6==i.type&&1===i.is_deliver?r("a",{on:{click:function(t){return e.isDeliver(i)}}},[e._v("配送信息")]):e._e(),6==i.type?r("Divider",{attrs:{type:"vertical"}}):e._e(),r("a",{on:{click:function(t){return e.deliver(i,2)}}},[e._v("备注")])]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:e.total,current:e.tableFrom.page,"show-elevator":"","show-total":"","page-size":e.tableFrom.limit},on:{"on-change":e.pageChange}})],1)],1),r("Modal",{attrs:{width:"40%",scrollable:"",closable:"","footer-hide":"",title:e.modelTitle?e.modelTitle:1===e.modelType?"发货":"备注","mask-closable":!1,"z-index":1},model:{value:e.shipModel,callback:function(t){e.shipModel=t},expression:"shipModel"}},[r("Form",{ref:1===e.modelType?"shipForm":"markForm",attrs:{model:1===e.modelType?e.shipForm:e.markForm,rules:1===e.modelType?e.ruleShip:e.ruleMark,"label-width":80},model:{value:e.shipModel,callback:function(t){e.shipModel=t},expression:"shipModel"}},[1===e.modelType?r("FormItem",{attrs:{label:"快递公司",prop:"deliver_name"}},[r("Select",{model:{value:e.shipForm.deliver_name,callback:function(t){e.$set(e.shipForm,"deliver_name",t)},expression:"shipForm.deliver_name"}},e._l(e.locationList,(function(t){return r("Option",{key:t.id,attrs:{value:t.value}},[e._v(e._s(t.value))])})),1)],1):e._e(),1===e.modelType?r("FormItem",{attrs:{label:"快递单号",prop:"deliver_number"}},[r("Input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.shipForm.deliver_number,callback:function(t){e.$set(e.shipForm,"deliver_number",t)},expression:"shipForm.deliver_number"}}),"顺丰速运"==e.shipForm.deliver_name?r("div",{staticClass:"trips"},[r("p",[e._v("顺丰请输入单号 :收件人或寄件人手机号后四位")]),r("p",[e._v("例如：SF000000000000:3941")])]):e._e()],1):e._e(),2===e.modelType?r("FormItem",{attrs:{label:"备注"}},[r("Input",{attrs:{placeholder:"请输入备注"},model:{value:e.markForm.mark,callback:function(t){e.$set(e.markForm,"mark",t)},expression:"markForm.mark"}})],1):e._e(),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.ok(1===e.modelType?"shipForm":"markForm")}}},[e._v("提交")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.cancel("formValidate")}}},[e._v("关闭")])],1)],1)],1)],1)},a=[],n=r("c964"),o=r("f3f3"),l=(r("a15b"),r("96cf"),r("2f62")),s=r("1184"),c=r("61f7"),u=r("f8b7"),d={deliver_name:[{required:!0,type:"string",message:"请选择快递公司",trigger:"select"}],deliver_number:[{required:!0,message:"请输入快递单号",trigger:"blur"}]},m={mark:[{required:!0,message:"请输入备注信息",trigger:"blur"}]},f={name:"lotteryRecordList",filters:{formatDate:function(e){if(0!==e){var t=new Date(1e3*e);return Object(c["a"])(t,"yyyy-MM-dd hh:mm")}}},data:function(){return{shipModel:!1,loading:!1,locationList:[],shipForm:{id:"",deliver_name:"",deliver_number:null},markForm:{id:"",mark:""},ruleShip:d,ruleMark:m,fromList:{title:"选择时间",fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},typeList:[{text:"全部",val:""},{text:"未中奖",val:"1"},{text:"积分",val:"2"},{text:"余额",val:"3"},{text:"红包",val:"4"},{text:"优惠券",val:"5"},{text:"商品",val:"6"}],columns1:[{title:"ID",key:"id",width:80},{title:"用户信息",slot:"user",minWidth:90},{title:"奖品信息",slot:"prize",minWidth:130},{title:"抽奖时间",key:"add_time",minWidth:100},{title:"收货信息",slot:"receive_info",minWidth:100},{title:"备注",slot:"mark",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:130}],tableList:[],grid:{xl:7,lg:10,md:12,sm:24,xs:24},tableFrom:{keyword:"",date:[],page:1,limit:15,factor:1},total:0,timeVal:[],modelType:1,lottery_id:"",modelTitle:""}},computed:Object(o["a"])(Object(o["a"])({},Object(l["e"])("admin/layout",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"left"}}),created:function(){this.tableFrom.lottery_id=this.$route.query.id,this.lottery_id=this.$route.query.id,this.getList(),this.getExpressData()},methods:{deliver:function(e,t){this.markForm.id=e.id,this.shipForm.id=e.id,this.shipForm.deliver_name="",this.shipForm.deliver_number="",this.markForm.mark=e.deliver_info.mark,this.modelType=t,this.shipModel=!0},isDeliver:function(e){this.markForm.id=e.id,this.shipForm.id=e.id,this.modelType=1,this.modelTitle="配送信息",this.shipModel=!0,this.shipForm.deliver_name=e.deliver_info.deliver_name,this.shipForm.deliver_number=e.deliver_info.deliver_number},ok:function(e){var t=this;this.$refs[e].validate((function(e){Object(s["e"])(1==t.modelType?t.shipForm:t.markForm).then((function(e){t.$Message.success("操作成功"),t.shipModel=!1,t.getList(),t.shipForm={id:"",deliver_name:"",deliver_number:null},t.modelTitle="",t.markForm={id:"",mark:""}})).catch((function(e){t.$Message.error(e.msg)}))}))},cancel:function(){this.modelType=1,this.modelTitle="",this.shipModel=!1},getExpressData:function(){var e=this;Object(u["i"])().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.locationList=r.data;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},onchangeTime:function(e){this.timeVal=e,this.tableFrom.data=this.timeVal[0]?this.timeVal.join("-"):"",this.tableFrom.page=1,this.getList()},selectChange:function(e){this.tableFrom.page=1,this.tableFrom.date=e,this.timeVal=[],this.getList()},selectType:function(e){this.tableFrom.page=1,this.timeVal=[],this.getList()},selectChangeFactor:function(){this.tableFrom.page=1,this.timeVal=[],this.getList()},getList:function(){var e=this;this.loading=!0,Object(s["f"])(this.tableFrom).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=r.data,e.tableList=i.list,e.total=r.data.count,e.loading=!1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},pageChange:function(e){this.tableFrom.page=e,this.getList()},userSearchs:function(){this.tableFrom.page=1,this.getList()}}},p=f,h=(r("fcff"),r("2877")),v=Object(h["a"])(p,i,a,!1,null,"426fef67",null);t["default"]=v.exports},edd0:function(e,t,r){var i=r("13d2"),a=r("9bf2");e.exports=function(e,t,r){return r.get&&i(r.get,t,{getter:!0}),r.set&&i(r.set,t,{setter:!0}),a.f(e,t,r)}},fcff:function(e,t,r){"use strict";var i=r("18ca"),a=r.n(i);a.a}}]);