(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/settled/index"],{"3d67":function(t,e,n){"use strict";(function(t){n("d5c5");i(n("66fd"));var e=i(n("5847"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"3da6":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={jyfParser:function(){return Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(n.bind(null,"ac2d"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,-1!=t.status||t.inloading?null:t.$t("代理商名称")),i=-1!=t.status||t.inloading?null:t.$t("请输入代理商名称"),a=-1!=t.status||t.inloading?null:t.$t("用户姓名"),s=-1!=t.status||t.inloading?null:t.$t("请输入姓名"),o=-1!=t.status||t.inloading?null:t.$t("联系电话"),u=-1!=t.status||t.inloading?null:t.$t("请输入手机号"),l=-1!=t.status||t.inloading?null:t.$t("验证码"),r=-1!=t.status||t.inloading?null:t.$t("填写验证码"),c=-1!=t.status||t.inloading?null:t.$t("邀请码"),d=-1!=t.status||t.inloading?null:t.$t("请输入代理商邀请码"),h=-1!=t.status||t.inloading?null:t.$t("请上传营业执照及行业相关资质证明图片"),f=-1!=t.status||t.inloading?null:t.$t("图片最多可上传10张,图片格式支持JPG、PNG、JPEG"),m=-1==t.status&&!t.inloading&&t.images.length<10?t.$t("上传图片"):null,g=-1!=t.status||t.inloading?null:t.$t("已阅读并同意"),p=-1!=t.status||t.inloading?null:t.$t("代理商协议"),v=-1!=t.status||t.inloading?null:t.$t("提交申请"),$=-1==t.status&&!t.inloading&&t.showProtocol?t.$t("代理商入驻协议"):null,_=-1==t.status&&!t.inloading||0!=t.status?null:t.$t("恭喜，您的资料提交成功！"),b=-1==t.status&&!t.inloading||0!=t.status?null:t.$t("返回首页"),w=-1==t.status&&!t.inloading||0==t.status||1!=t.status?null:t.$t("恭喜，您的资料通过审核！"),y=-1==t.status&&!t.inloading||0==t.status||1!=t.status?null:t.$t("返回首页"),T=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("您的申请未通过！"),x=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("重新申请"),A=-1==t.status&&!t.inloading||0==t.status||1==t.status||2!=t.status?null:t.$t("返回首页");t._isMounted||(t.e0=function(e){t.showProtocol=!1}),t.$mp.data=Object.assign({},{$root:{m0:n,m1:i,m2:a,m3:s,m4:o,m5:u,m6:l,m7:r,m8:c,m9:d,m10:h,m11:f,m12:m,m13:g,m14:p,m15:v,m16:$,m17:_,m18:b,m19:w,m20:y,m21:T,m22:x,m23:A}})},s=[]},"48fe":function(t,e,n){"use strict";var i=n("558e"),a=n.n(i);a.a},"558e":function(t,e,n){},5847:function(t,e,n){"use strict";n.r(e);var i=n("3da6"),a=n("ff66");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("48fe");var o,u=n("f0c5"),l=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"1b9aea36",null,!1,i["a"],o);e["default"]=l.exports},c99e:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(n("a34a")),a=(n("1118"),n("dbf8")),s=n("cff9"),o=n("26cb"),u=l(n("cf74"));function l(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,a,s,o){try{var u=t[s](o),l=u.value}catch(r){return void n(r)}u.done?e(l):Promise.resolve(l).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var s=t.apply(e,n);function o(t){r(s,i,a,o,u,"next",t)}function u(t){r(s,i,a,o,u,"throw",t)}o(void 0)}))}}var d=function(){Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(n("ac2d"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/Authorize").then(function(){return resolve(n("4a3a"))}.bind(null,n)).catch(n.oe)},f=getApp(),m={components:{"jyf-parser":d,authorize:h},mixins:[u.default],data:function(){return{inloading:!0,status:-1,isAuto:!1,isShowAuth:!1,text:this.$t("获取验证码"),codeUrl:"",disabled:!1,isAgree:!1,showProtocol:!1,isShowCode:!1,loading:!1,merchantData:{agent_name:"",name:"",phone:"",classification:"",division_invite:""},validate:!1,successful:!1,keyCode:"",codeVal:"",protocol:f.globalData.sys_intention_agree,timer:"",index:0,index1:0,mer_classification:"",mer_storeType:"",images:[],tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%"},mer_i_id:null,isType:!1,id:0,refusal_reason:""}},beforeDestroy:function(){clearTimeout(this.timer)},computed:(0,o.mapGetters)(["isLogin"]),onLoad:function(e){this.isLogin?this.$nextTick((function(){this.getGoodsDetails()})):(this.isAuto=!0,this.$set(this,"isShowAuth",!0)),e.id&&(this.id=id,t.showLoading({title:this.$t("正在加载中")}))},onShow:function(){},methods:{getAgentAgreement:function(){var t=this;(0,a.getAgentAgreement)().then((function(e){t.isType=!1,t.showProtocol=!0,t.protocol=e.data.content}))},getCode:function(){var t=this,e=this;(0,a.getCodeApi)().then((function(n){e.keyCode=n.data.key,t.code()})).catch((function(t){e.$util.Tips({title:t})}))},getGoodsDetails:function(){var e=this;(0,a.getGoodsDetails)().then((function(n){e.status=n.data.status;var i=n.data;if(-1!==n.data.status){var a=Object.keys(e.merchantData);a.map((function(t){e.merchantData[t]=i[t]})),t.hideLoading()}2===e.status&&(e.refusal_reason=i.refusal_reason),e.inloading=!1}))},getCategoryName:function(t,e){for(var n=0;n<e.length;n++)if(e[n].merchant_category_id===t)return e[n]["category_name"]},getPhotoClickIdx:function(t){var e=this,n=t.currentTarget.dataset.index;e.imgPreview(e.images,n)},imgPreview:function(e,n){e&&e.length>0&&t.previewImage({current:e[n],urls:e})},onLoadFun:function(){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},toggleTab:function(t){this.$refs[t].show()},goHome:function(){t.switchTab({url:"/pages/index/index"})},applyAgain:function(){this.status=-1},uploadpic:function(){var t=this,e=this;e.$util.uploadImageOne("upload/image",(function(n){t.images.push(n.data.url),e.$set(e,"images",e.images)}))},DelPic:function(t){var e=this;this.images[t];e.images.splice(t,1),e.$set(e,"images",e.images)},code:function(){var t=this;return c(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t,n.merchantData.phone){e.next=3;break}return e.abrupt("return",n.$util.Tips({title:n.$t("请输入手机号")}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(n.merchantData.phone)){e.next=5;break}return e.abrupt("return",n.$util.Tips({title:n.$t("请输入正确的手机号码")}));case 5:return e.next=7,(0,a.registerVerify)({phone:n.merchantData.phone,key:n.keyCode}).then((function(t){n.$util.Tips({title:t.msg}),n.sendCode()})).catch((function(t){return n.$util.Tips({title:t})}));case 7:case"end":return e.stop()}}),e)})))()},getcaptcha:function(){var t=this;(0,s.getCaptcha)().then((function(e){t.codeUrl=e.data.captcha,t.codeVal=e.data.code,t.codeKey=e.data.key})),t.isShowCode=!0},sendCode:function(){var t=this;if(!this.disabled){this.disabled=!0;var e=60;this.text=e+"s";var n=setInterval((function(){e-=1,e<0&&clearInterval(n),t.text=e+"s",t.text<"0s"&&(t.disabled=!1,t.text=t.$t("重新获取"))}),1e3)}},onConfirm:function(t){this.region=t.checkArr[0]+"-"+t.checkArr[1]+"-"+t.checkArr[2]},ChangeIsAgree:function(t){this.isAgree=!this.isAgree,this.validateBtn()},formSubmit:function(t){var e=this,n=this;if(n.validateForm()&&n.validate){var i={uid:this.$store.state.app.uid,phone:n.merchantData.phone,agent_name:n.merchantData.agent_name,name:n.merchantData.name,code:n.merchantData.code,division_invite:n.merchantData.division_invite,images:n.images,id:this.id};(0,a.create)(i).then((function(t){200==t.status&&(e.timer=setTimeout((function(){n.getGoodsDetails()}),1e3))})).catch((function(t){n.$util.Tips({title:t})}))}},validateBtn:function(){var t=this,e=t.merchantData;e.agent_name&&e.name&&e.phone&&/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)&&e.code&&t.isAgree&&e.classification&&(t.isShowCode?t.codeVal?t.validate=!0:t.validate=!1:t.validate=!0)},validateForm:function(){var t=this,e=t.merchantData;return e.agent_name?e.name?e.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)?e.code?t.isShowCode&&!t.codeVal?t.$util.Tips({title:t.$t("请填写图片验证码")}):t.images.length?t.isAgree?(t.validate=!0,!0):t.$util.Tips({title:t.$t("请勾选并同意入驻协议")}):t.$util.Tips({title:t.$t("请上传营业执照")}):t.$util.Tips({title:t.$t("填写验证码")}):t.$util.Tips({title:t.$t("请输入正确的手机号码")}):t.$util.Tips({title:t.$t("请输入手机号")}):t.$util.Tips({title:t.$t("请输入姓名")}):t.$util.Tips({title:t.$t("请输入代理商名称")})},jumpToList:function(){t.navigateTo({url:"/pages/store/applicationRecord/index"})}}};e.default=m}).call(this,n("543d")["default"])},ff66:function(t,e,n){"use strict";n.r(e);var i=n("c99e"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a}},[["3d67","common/runtime","common/vendor"]]]);