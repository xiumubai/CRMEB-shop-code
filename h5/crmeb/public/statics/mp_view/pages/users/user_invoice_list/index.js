(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_invoice_list/index"],{2787:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("26cb"),o=i("cff9"),c=i("a398"),a=r(i("cf74")),s=i("d5d8");function r(t){return t&&t.__esModule?t:{default:t}}var u=function(){Promise.all([i.e("common/vendor"),i.e("components/home/index")]).then(function(){return resolve(i("4f25"))}.bind(null,i)).catch(i.oe)},l={components:{home:u},mixins:[a.default],data:function(){return{imgHost:s.HTTP_REQUEST_URL,orderList:[],invoiceList:[],nav:1,page:1,limit:30,loading:!1,finished:!1,specialInvoice:!0}},watch:{nav:{immediate:!0,handler:function(t){switch(this.page=1,t){case 1:this.orderList=[],this.getOrderList();break;case 2:this.invoiceList=[],this.getInvoiceList();break}}}},computed:(0,n.mapGetters)(["isLogin"]),onLoad:function(t){"invoice_form"===t.from&&(this.nav=2),this.getUserInfo()},methods:{getUserInfo:function(){var t=this;(0,o.getUserInfo)().then((function(e){var i=e.data.special_invoice;t.specialInvoice=i}))},navTab:function(t){this.nav!==t&&(this.nav=t)},getOrderList:function(){var e=this;t.showLoading({title:this.$t("加载中")}),(0,c.orderInvoiceList)({page:this.page,limit:this.limit}).then((function(i){var n=i.data;t.hideLoading(),e.orderList=e.orderList.concat(n),e.finished=n.length<e.limit,e.page+=1})).catch((function(e){t.showToast({title:e.msg,icon:"none"})}))},getInvoiceList:function(){var e=this;t.showLoading({title:this.$t("加载中")}),(0,o.invoiceList)({page:this.page,limit:this.limit}).then((function(i){var n=i.data;t.hideLoading(),e.invoiceList=e.invoiceList.concat(n),e.finished=n.length<e.limit,e.page+=1})).catch((function(e){t.showToast({title:e.msg,icon:"none"})}))},editInvoice:function(e){t.navigateTo({url:"/pages/users/user_invoice_form/index?id=".concat(e)})},deleteInvoice:function(e){var i=this;t.showModal({content:i.$t("删除该发票？"),confirmColor:"#E93323",success:function(t){t.confirm&&(0,o.invoiceDelete)(e).then((function(){i.$util.Tips({title:i.$t("删除成功"),icon:"success"},(function(){var t=i.invoiceList.findIndex((function(t){return t.id==e}));i.invoiceList.splice(t,1)}))})).catch((function(t){return i.$util.Tips({title:t})}))}})}}};e.default=l}).call(this,i("543d")["default"])},"40a9":function(t,e,i){"use strict";i.r(e);var n=i("2787"),o=i.n(n);for(var c in n)"default"!==c&&function(t){i.d(e,t,(function(){return n[t]}))}(c);e["default"]=o.a},"5a93":function(t,e,i){"use strict";(function(t){i("d5c5");n(i("66fd"));var e=n(i("9a3b"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"5c3c":function(t,e,i){},8791:function(t,e,i){"use strict";var n=i("5c3c"),o=i.n(n);o.a},"8bfa":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$t("发票记录")),n=t.$t("抬头管理"),o=t.$t("发票"),c=t.$t("申请时间"),a=t.$t("￥"),s=t.$t("查看详情"),r=t.__map(t.orderList,(function(e,i){var n=t.__get_orig(e),o=1===e.header_type?t.$t("个人"):null,c=1!==e.header_type?t.$t("企业"):null,a=1===e.type?t.$t("普通"):null,s=1!==e.type?t.$t("专用"):null,r=e.is_invoice?t.$t("已开票"):null,u=e.is_invoice?null:t.$t("未开票");return{$orig:n,m2:o,m3:c,m4:a,m5:s,m9:r,m10:u}})),u=t.$t("没有发票信息哟~"),l=t.invoiceList.length?t.__map(t.invoiceList,(function(e,i){var n=t.__get_orig(e),o=(1===e.type||2===e.type&&t.specialInvoice)&&e.is_default?t.$t("默认"):null,c=(1===e.type||2===e.type&&t.specialInvoice)&&1===e.type&&1===e.header_type?t.$t("个人普通发票"):null,a=!(1===e.type||2===e.type&&t.specialInvoice)||1===e.type&&1===e.header_type||1!==e.type||2!==e.header_type?null:t.$t("企业普通发票"),s=!(1===e.type||2===e.type&&t.specialInvoice)||1===e.type&&1===e.header_type||1===e.type&&2===e.header_type?null:t.$t("企业专用发票"),r=1===e.type||2===e.type&&t.specialInvoice?t.$t("联系邮箱"):null,u=(1===e.type||2===e.type&&t.specialInvoice)&&2===e.header_type?t.$t("企业税号"):null,l=(1===e.type||2===e.type&&t.specialInvoice)&&1===e.header_type&&e.drawer_phone?t.$t("联系电话"):null,d=1===e.type||2===e.type&&t.specialInvoice?t.$t("编辑"):null,f=1===e.type||2===e.type&&t.specialInvoice?t.$t("删除"):null;return{$orig:n,m13:o,m14:c,m15:a,m16:s,m17:r,m18:u,m19:l,m20:d,m21:f}})):null,d=t.$t("没有发票信息哟~"),f=t.$t("添加新发票");t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m6:o,m7:c,m8:a,m11:s,l0:r,m12:u,l1:l,m22:d,m23:f}})},c=[]},"9a3b":function(t,e,i){"use strict";i.r(e);var n=i("8bfa"),o=i("40a9");for(var c in o)"default"!==c&&function(t){i.d(e,t,(function(){return o[t]}))}(c);i("8791");var a,s=i("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"a5e7b2f2",null,!1,n["a"],a);e["default"]=r.exports}},[["5a93","common/runtime","common/vendor"]]]);