(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{447:function(t,e,c){var content=c(512);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,c(3).default)("610ba5df",content,!0,{sourceMap:!1})},510:function(t,e,c){t.exports=c.p+"img/noCart1.49e0be5.png"},511:function(t,e,c){"use strict";var r=c(447);c.n(r).a},512:function(t,e,c){(e=c(2)(!1)).push([t.i,".grey[data-v-54af6c8c]{color:#d0d0d0!important}.shoppingCart[data-v-54af6c8c]{cursor:pointer}.shoppingCart .noCart[data-v-54af6c8c]{text-align:center}.shoppingCart .noCart .pictrue[data-v-54af6c8c]{width:274px;height:174px;margin:111px auto 0}.shoppingCart .noCart .pictrue img[data-v-54af6c8c]{width:100%;height:100%}.shoppingCart .noCart .tip[data-v-54af6c8c]{font-size:14px;color:#969696;margin-top:20px}.shoppingCart .noCart .goIndex[data-v-54af6c8c]{width:90px;height:35px;border:1px solid #282828;border-radius:6px;text-align:center;line-height:35px;font-size:14px;color:#282828;margin:24px auto 100px;display:block}.shoppingCart .title[data-v-54af6c8c]{height:59px;line-height:59px;color:#999}.shoppingCart .title .home[data-v-54af6c8c]{color:#282828}.shoppingCart .cartList .header[data-v-54af6c8c]{height:54px;background:#f9f9f9}.shoppingCart .cartList .allSelect[data-v-54af6c8c]{width:100px;position:relative}.shoppingCart .cartList .allSelect .checkAll[data-v-54af6c8c]{margin-left:30px}.shoppingCart .cartList .info[data-v-54af6c8c]{width:400px;padding-left:30px}.shoppingCart .cartList .price[data-v-54af6c8c]{width:215px}.shoppingCart .cartList .num[data-v-54af6c8c]{width:150px}.shoppingCart .cartList .money[data-v-54af6c8c]{width:270px}.shoppingCart .cartList .body[data-v-54af6c8c]{border:1px solid #efefef;border-top:0}.shoppingCart .cartList .body .item[data-v-54af6c8c]{height:170px}.shoppingCart .cartList .body .item~.item[data-v-54af6c8c]{border-top:1px dotted #e2e2e2}.shoppingCart .cartList .body .item .info .pictrue[data-v-54af6c8c]{width:90px;height:90px;margin-right:14px}.shoppingCart .cartList .body .item .info .pictrue img[data-v-54af6c8c]{width:100%;height:100%}.shoppingCart .cartList .body .item .info .text[data-v-54af6c8c]{width:264px}.shoppingCart .cartList .body .item .info .text .infor[data-v-54af6c8c]{margin-top:10px;font-size:12px;color:#d0d0d0}.shoppingCart .cartList .body .item .price[data-v-54af6c8c]{font-size:16px}.shoppingCart .cartList .body .item .num .iconfont[data-v-54af6c8c]{width:40px;height:36px;line-height:36px;border:1px solid #d3d3d3;text-align:center;color:#707070;background-color:#fff}.shoppingCart .cartList .body .item .num .numCon[data-v-54af6c8c]{width:54px;height:36px;border:0;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;font-size:15px;color:#5a5a5a;text-align:center;line-height:36px;outline:none}.shoppingCart .cartList .body .item .money[data-v-54af6c8c]{font-size:16px}.shoppingCart .cartList .body .item .operate[data-v-54af6c8c]{color:#d0d0d0}.shoppingCart .cartList .body .item .operate .iconfont[data-v-54af6c8c]{font-size:20px}.shoppingCart .invalid[data-v-54af6c8c]{margin-top:20px;border-top:1px solid #efefef}.shoppingCart .footer[data-v-54af6c8c]{height:82px;background:#f9f9f9;margin-top:60px;padding-left:30px;margin-bottom:30px}.shoppingCart .footer .total[data-v-54af6c8c]{font-size:16px}.shoppingCart .footer .total .font-color[data-v-54af6c8c]{font-size:22px;font-weight:700}.shoppingCart .footer .bnt[data-v-54af6c8c]{width:160px;height:82px;text-align:center;line-height:82px;font-size:18px;color:#fff;margin-left:30px}",""]),t.exports=e},578:function(t,e,c){"use strict";c.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pictrue"},[e("img",{attrs:{src:c(510)}})])}],o=(c(28),c(29),c(10),c(38),c(4)),n={name:"shoppingCart",auth:"guest",data:function(){return{cartValid:[],cartInvalid:[],isAllSelect:!1,checkedIds:[],countmoney:0}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.app;case 1:case"end":return e.stop()}}),e)})))()},fetch:function(t){var e=t.store;e.commit("isHeader",!0),e.commit("isFooter",!0)},head:function(){return{title:"购物车-"+this.$store.state.titleCon}},created:function(){this.getCartList()},mounted:function(){document.body.setAttribute("style","background:#ffffff")},beforeDestroy:function(){document.body.removeAttribute("style")},methods:{inputNum:function(t){t.cart_num=parseInt(t.cart_num)>=t.trueStock?t.trueStock:t.cart_num,t.cart_num=parseInt(t.cart_num)<=1||isNaN(parseInt(t.cart_num))?1:t.cart_num,this.countMoney();var e=0;this.cartValid.forEach((function(i){e+=parseInt(i.cart_num)})),this.cartInvalid.forEach((function(i){e+=parseInt(i.cart_num)})),this.$store.commit("cartNum",e),this.syncCartNum(t)},subOrder:function(){var t=this.cartValid,e=[];t.forEach((function(t){!0===t.checked&&e.push(t.id)})),0!==e.length?this.$router.push({path:"/order_confirm",query:{cartId:e.join(",")}}):this.$message.error("请选择产品")},delgoods:function(t){var e=this,c=e.$cookies.get("cart_checked")||[],r=c.indexOf(t.id);r>-1&&c.splice(r,1),e.$cookies.set("cart_checked",c),e.$axios.post("/cart/del",{ids:t.id.toString()}).then((function(c){e.$message.success("删除成功"),e.$store.commit("cartNum",e.$store.state.cartnumber-t.cart_num),e.getCartList(),e.countMoney()}))},getCartList:function(){var t=this;t.$axios.get("/pc/get_cart_list").then((function(e){t.cartValid=e.data.valid,t.cartInvalid=e.data.invalid;var c=t.$cookies.get("cart_checked")||[];Array.isArray(c)||(c=[]),t.cartValid.forEach((function(e){c.length?-1!==c.indexOf(e.id)?e.checked=!0:e.checked=!1:(e.checked=!0,t.checkedIds.push(e.id))})),c.length&&(t.checkedIds=c),t.isAllSelect=t.checkedIds.length===t.cartValid.length,t.countMoney()}))},plus:function(t){var e=this.cartValid[t];e.cart_num++,e.cart_num>=e.trueStock&&this.$set(e,"cart_num",e.trueStock),this.$store.commit("cartNum",this.$store.state.cartnumber+1),this.countMoney(),this.syncCartNum(e)},reduce:function(t){var e=this.cartValid[t];e.cart_num--,e.cart_num<1?this.$set(e,"cart_num",1):this.$store.commit("cartNum",this.$store.state.cartnumber-1),this.countMoney(),this.syncCartNum(e)},syncCartNum:function(t){var e=this;t.sync||(t.sync=window.debounce((function(){e.$axios.post("/cart/num",{id:t.id,number:Math.max(t.cart_num,1)||1})}),500)),t.sync()},switchSelect:function(t){var e=this.cartValid[t],i=this.checkedIds.indexOf(e.id);e.checked=!e.checked,-1!==i&&this.checkedIds.splice(i,1),e.checked&&this.checkedIds.push(e.id);for(var c=this.cartValid.length,r=[],o=0;o<c;o++)!0===this.cartValid[o].checked&&r.push(!0);this.isAllSelect=r.length===c,this.$set(this,"cartValid",this.cartValid),this.$set(this,"isAllSelect",this.isAllSelect),this.$cookies.set("cart_checked",this.checkedIds),this.countMoney()},allChecked:function(){var t=this.isAllSelect;t=!t;var e=[];this.cartValid.forEach((function(c){c.checked=t,t&&e.push(c.id)})),this.$set(this,"cartValid",this.cartValid),this.$set(this,"isAllSelect",t),this.checkedIds=e,this.$cookies.set("cart_checked",e),this.countMoney()},countMoney:function(){for(var t=0,e=this.cartValid,i=0;i<e.length;i++)!0===e[i].checked&&(t=this.comsys.Add(t,this.comsys.Mul(e[i].cart_num,e[i].truePrice)));this.countmoney=t}}},d=(c(511),c(13)),component=Object(d.a)(n,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"shoppingCart wrapper_1200"},[c("div",{staticClass:"title wrapper_1200"},[c("nuxt-link",{staticClass:"home",attrs:{to:"/"}},[t._v("首页 > ")]),t._v("购物车\n  ")],1),t._v(" "),t.cartValid.length?c("div",{staticClass:"cartList"},[c("div",{staticClass:"header acea-row row-middle"},[c("div",{staticClass:"allSelect acea-row row-center-wrapper",on:{click:t.allChecked}},[c("div",{staticClass:"checkbox-wrapper"},[c("label",{staticClass:"well-check"},[c("input",{attrs:{type:"checkbox",name:"",value:""},domProps:{checked:t.isAllSelect},on:{click:t.allChecked}}),t._v(" "),c("i",{staticClass:"icon"}),t._v(" "),c("span",{staticClass:"checkAll"},[t._v("全选")])])])]),t._v(" "),c("div",{staticClass:"info acea-row row-center-wrapper"},[t._v("商品信息")]),t._v(" "),c("div",{staticClass:"price acea-row row-center-wrapper"},[t._v("单价")]),t._v(" "),c("div",{staticClass:"num acea-row row-center-wrapper"},[t._v("数量")]),t._v(" "),c("div",{staticClass:"money acea-row row-center-wrapper"},[t._v("金额")]),t._v(" "),c("div",{staticClass:"operate acea-row row-center-wrapper"},[t._v("操作")])]),t._v(" "),c("div",{staticClass:"body"},t._l(t.cartValid,(function(e,r){return c("div",{key:r,staticClass:"item acea-row row-middle"},[c("div",{staticClass:"allSelect acea-row row-center-wrapper"},[c("div",{staticClass:"checkbox-wrapper"},[c("label",{staticClass:"well-check"},[c("input",{attrs:{type:"checkbox",name:"",value:""},domProps:{checked:e.checked},on:{click:function(e){return t.switchSelect(r)}}}),t._v(" "),c("i",{staticClass:"icon"})])])]),t._v(" "),c("div",{staticClass:"info acea-row row-middle"},[c("div",{staticClass:"pictrue"},[e.productInfo.attrInfo?c("img",{attrs:{src:e.productInfo.attrInfo.image}}):c("img",{attrs:{src:e.productInfo.image}})]),t._v(" "),c("div",{staticClass:"text"},[c("div",{staticClass:"name line2"},[t._v(t._s(e.productInfo.store_name))]),t._v(" "),e.productInfo.attrInfo?c("div",{staticClass:"infor"},[t._v("属性："+t._s(e.productInfo.attrInfo.suk))]):t._e()])]),t._v(" "),c("div",{staticClass:"price acea-row row-center-wrapper"},[t._v("¥"+t._s(e.truePrice))]),t._v(" "),c("div",{staticClass:"num acea-row row-center-wrapper"},[c("div",{staticClass:"iconfont icon-shangpinshuliang-jian",class:e.cart_num<=1?"grey":"",on:{click:function(e){return e.preventDefault(),t.reduce(r)}}}),t._v(" "),c("input",{directives:[{name:"model",rawName:"v-model",value:e.cart_num,expression:"item.cart_num"}],staticClass:"numCon",domProps:{value:e.cart_num},on:{input:[function(c){c.target.composing||t.$set(e,"cart_num",c.target.value)},function(c){return t.inputNum(e)}]}}),t._v(" "),c("button",{staticClass:"iconfont icon-shangpinshuliang-jia",class:e.cart_num>=e.trueStock?"grey":"",attrs:{disabled:e.cart_num>=e.trueStock},on:{click:function(e){return e.preventDefault(),t.plus(r)}}})]),t._v(" "),c("div",{staticClass:"money acea-row row-center-wrapper font-color"},[t._v("¥"+t._s(t.comsys.Mul(e.truePrice,e.cart_num)))]),t._v(" "),c("div",{staticClass:"operate acea-row row-center-wrapper",on:{click:function(c){return t.delgoods(e)}}},[c("span",{staticClass:"iconfont icon-shanchu"})])])})),0)]):t._e(),t._v(" "),t.cartInvalid.length?c("div",{staticClass:"cartList invalid"},[c("div",{staticClass:"body"},t._l(t.cartInvalid,(function(e,r){return c("div",{key:r,staticClass:"item acea-row row-middle"},[c("div",{staticClass:"allSelect"}),t._v(" "),c("div",{staticClass:"info acea-row row-center-wrapper"},[c("div",{staticClass:"pictrue"},[e.productInfo.attrInfo?c("img",{attrs:{src:e.productInfo.attrInfo.image}}):c("img",{attrs:{src:e.productInfo.image}})]),t._v(" "),c("div",{staticClass:"text"},[c("div",{staticClass:"name line2 grey"},[t._v(t._s(e.productInfo.store_name))]),t._v(" "),e.productInfo.attrInfo?c("div",{staticClass:"infor"},[t._v("属性："+t._s(e.productInfo.attrInfo.suk))]):t._e()])]),t._v(" "),c("div",{staticClass:"price acea-row row-center-wrapper grey"},[t._v("¥"+t._s(e.truePrice))]),t._v(" "),c("div",{staticClass:"num acea-row row-center-wrapper"},[c("div",{staticClass:"iconfont icon-shangpinshuliang-jian grey"}),t._v(" "),c("div",{staticClass:"numCon grey"},[t._v(t._s(e.cart_num))]),t._v(" "),c("div",{staticClass:"iconfont icon-shangpinshuliang-jia grey"})]),t._v(" "),c("div",{staticClass:"money acea-row row-center-wrapper font-color grey"},[t._v("¥"+t._s(t.comsys.Mul(e.truePrice,e.cart_num)))]),t._v(" "),c("div",{staticClass:"operate acea-row row-center-wrapper",on:{click:function(c){return t.delgoods(e)}}},[c("span",{staticClass:"iconfont icon-shanchu"})])])})),0)]):t._e(),t._v(" "),t.cartValid.length||t.cartInvalid.length?c("div",{staticClass:"footer acea-row row-between-wrapper"},[c("div",{staticClass:"num"},[t._v("已选 "+t._s(t.checkedIds.length)+" 件商品")]),t._v(" "),c("div",{staticClass:"acea-row row-middle"},[c("div",{staticClass:"total"},[t._v("合计："),c("span",{staticClass:"font-color"},[t._v("¥"+t._s(t.countmoney))])]),t._v(" "),c("div",{staticClass:"bnt bg-color",on:{click:t.subOrder}},[t._v("去结算")])])]):t._e(),t._v(" "),t.cartValid.length||t.cartInvalid.length?t._e():c("div",{staticClass:"noCart"},[t._m(0),t._v(" "),c("div",{staticClass:"tip"},[t._v("亲，购物车还是空的哟~")]),t._v(" "),c("nuxt-link",{staticClass:"goIndex",attrs:{to:"/"}},[t._v("继续逛")])],1)])}),r,!1,null,"54af6c8c",null);e.default=component.exports}}]);