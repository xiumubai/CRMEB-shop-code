(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{422:function(t,e,r){var content=r(469);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(3).default)("c38610b8",content,!0,{sourceMap:!1})},467:function(t,e,r){t.exports=r.p+"img/alipay.8bb0236.png"},468:function(t,e,r){"use strict";var o=r(422);r.n(o).a},469:function(t,e,r){(e=r(2)(!1)).push([t.i,".wxPay .header[data-v-6197a2b9]{color:#999;height:60px;line-height:60px}.wxPay .header .home[data-v-6197a2b9]{color:#282828}.wxPay .wrapper[data-v-6197a2b9]{padding:26px 30px;background-color:#fff}.wxPay .wrapper .title[data-v-6197a2b9]{margin-bottom:51px;font-size:20px}.wxPay .wrapper .title .amount[data-v-6197a2b9]{font-size:14px;color:#969696}.wxPay .wrapper .title .amount .num[data-v-6197a2b9]{font-size:22px;font-weight:700}.wxPay .wrapper .wx[data-v-6197a2b9]{width:310px}.wxPay .wrapper .wx .pictrue[data-v-6197a2b9]{width:100%;height:310px;border:1px solid #ccc}.wxPay .wrapper .wx .pictrue img[data-v-6197a2b9]{width:100%;height:100%}.wxPay .wrapper .wx .text[data-v-6197a2b9]{width:100%;height:72px;background-color:#1676ff;color:#fff;font-size:14px;margin-top:16px}.wxPay .wrapper .wx .text .iconfont[data-v-6197a2b9]{font-size:50px;margin-right:30px}.wxPay .wrapper .wx .text .tip[data-v-6197a2b9]{margin-top:4px}.wxPay .wrapper .phone[data-v-6197a2b9]{margin-left:144px;width:262px;height:399px}.wxPay .wrapper .phone img[data-v-6197a2b9]{width:100%;height:100%}.wxPay .wrapper .selectPay[data-v-6197a2b9]{font-size:16px;color:#236fe9;margin-top:68px;cursor:pointer}.wxPay .wrapper .selectPay .iconfont[data-v-6197a2b9]{margin-right:16px;font-size:15px}",""]),t.exports=e},560:function(t,e,r){"use strict";r.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text acea-row row-center-wrapper"},[e("div",{staticClass:"iconfont icon-saoyisao"}),this._v(" "),e("div",[e("div",[this._v("请使用支付宝扫一扫")]),this._v(" "),e("div",{staticClass:"tip"},[this._v("扫描二维码支付")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"phone"},[e("img",{attrs:{src:r(467)}})])}],n=(r(26),{name:"wxPay",auth:"guest",data:function(){return{orderId:0,totalPrice:0,codeUrl:"",logo:"",invalid:0,endTime:"",timeName:null,quitUrl:""}},watch:{endTime:function(t){0===t&&clearInterval(this.timeName)}},fetch:function(t){var e=t.store;e.commit("isHeader",!0),e.commit("isFooter",!0)},head:function(){return{title:"支付宝支付-"+this.$store.state.titleCon}},created:function(){this.orderId=this.$route.query.orderId,this.totalPrice=this.$route.query.totalPrice},mounted:function(){this.quitUrl=window.location.protocol+"//"+window.location.host+"/order_detail"+"?orderId=".concat(this.orderId),this.goAli()},beforeDestroy:function(){clearInterval(this.timeName)},methods:{aliSuccess:function(){var t=this;t.$axios.get("/pc/check_order_status/"+t.orderId+"/"+t.invalid).then((function(e){t.endTime=e.data.time,e.data.status&&(clearInterval(t.timeName),t.$message.success("支付成功"),t.$store.commit("cartNum",0),t.getOrderCoupon(t.orderId),setTimeout((function(){t.$router.replace({path:"/order_detail",query:{orderId:t.orderId}})}),1e3))})).catch((function(e){t.$message.error(e),setTimeout((function(){t.$router.replace({path:"/"})}),1e3)}))},getOrderCoupon:function(t){this.$axios.post("/v2/order/product_coupon/"+t).then((function(t){}))},Return:function(){this.$router.go(-1)},goAli:function(){var t=this,e=this;e.$axios.post("/order/pay",{uni:e.orderId,paytype:"alipay",from:"pc",quitUrl:this.quitUrl}).then((function(r){e.codeUrl=r.data.result.jsConfig.qrCode,e.invalid=r.data.result.jsConfig.invalid,t.timeName=setInterval((function(){t.aliSuccess()}),2e3)})).catch((function(t){e.$message.error(t)}))}}}),c=(r(468),r(13)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wxPay wrapper_1200"},[r("div",{staticClass:"header"},[r("span",{staticClass:"home"},[t._v("首页 > 个人中心 > 确认订单 >")]),t._v(" 订单号："+t._s(t.orderId)+"\n  ")]),t._v(" "),r("div",{staticClass:"wrapper"},[r("div",{staticClass:"title acea-row row-between-wrapper"},[r("div",[t._v("支付宝支付")]),t._v(" "),r("div",{staticClass:"amount"},[t._v("\n        应付金额："),r("span",{staticClass:"num font-color"},[t._v(t._s(t.totalPrice))]),t._v("元\n      ")])]),t._v(" "),r("div",{staticClass:"acea-row row-center-wrapper"},[r("div",{staticClass:"wx"},[r("div",{staticClass:"pictrue"},[r("client-only",[r("vue-qr",{staticClass:"bicode",attrs:{logoSrc:t.logo,text:t.codeUrl,size:310}})],1)],1),t._v(" "),t._m(0)]),t._v(" "),t._m(1)]),t._v(" "),r("div",{staticClass:"selectPay",on:{click:t.Return}},[r("span",{staticClass:"iconfont icon-fanhui"}),t._v("选择其他支付方式\n    ")])])])}),o,!1,null,"6197a2b9",null);e.default=component.exports}}]);